(this["webpackJsonponline-desktop"]=this["webpackJsonponline-desktop"]||[]).push([[0],{3:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s}));var r={titleColor:"#777777",titleTextColor:"#EEEEEE",optionColor:"#333333",optionTextColor:"#EEEEEE",contentColor:"#555555",contentTextColor:"#EEEEEE",borderColor:"#AAAAAA",transparentBlack:"#00000080",transparentWhite:"#FFFFFF80",windowBackground:"#AAAAAA",backgroundTheme:"#444444",foregroundTheme:"#EEEEEE",red:"#D45548",green:"#48D465 ",yellow:"#D0D448"},a={IND:0,DEV:1,ORG:2},i={TXT:0,IMG:1,VID:2,AUD:3,XML:4,JS:5,CSS:6,PPT:7,DOC:8,XLS:9,UNKNOWN:10},o={txtExts:["txt","log","rtf"],imgExts:["jpg","jpeg","png","gif","pdf","raw"],vidExts:["mp4","m4v","avi","webm","wav"],audExts:["mp3"],xmlExts:["xml","htm","html"],jsExts:["js","jsx","ts"],cssExts:["css","scss"],pptExts:["ppt","pptx"],docExts:["doc","docx"],xlsExts:["xls","xlsx"],otherExts:[]},s={API_KEY:"AIzaSyAgZDhfr8kDvpZxhupSWsVz2dRFpWXw7UE",CLIENT_ID:"694420543975-2o5hqp8h6nc67ggejq4p2gjsr60i7ir6.apps.googleusercontent.com"}},63:function(e,t,n){},9:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return UUID})),__webpack_require__.d(__webpack_exports__,"h",(function(){return lString})),__webpack_require__.d(__webpack_exports__,"e",(function(){return evaluate})),__webpack_require__.d(__webpack_exports__,"k",(function(){return validEmail})),__webpack_require__.d(__webpack_exports__,"m",(function(){return validUserName})),__webpack_require__.d(__webpack_exports__,"l",(function(){return validPassword})),__webpack_require__.d(__webpack_exports__,"b",(function(){return blobToBase64})),__webpack_require__.d(__webpack_exports__,"f",(function(){return formatDate})),__webpack_require__.d(__webpack_exports__,"c",(function(){return blobToTxt})),__webpack_require__.d(__webpack_exports__,"j",(function(){return successRes})),__webpack_require__.d(__webpack_exports__,"d",(function(){return errorRes})),__webpack_require__.d(__webpack_exports__,"i",(function(){return sleep})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getFileType}));var E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17),_config_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},lString=function(e,t,n){return e.length>t?e.substr(0,t-n.length)+n:e},evaluate=function evaluate(data){try{return eval(data)}catch(e){return e.message}},validEmail=function(e){return/\S+@\S+\.\S+/.test(e)},validUserName=function(e){return/^[a-zA-Z0-9]+$/i.test(e)&&e.length>=8&&e.length<=16},validPassword=function(e){return/^[a-zA-Z0-9]+$/i.test(e)&&e.length>=8&&e.length<=16},blobToBase64=function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))},formatDate=function(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),second:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),hour:e.getHours()<10?"0"+e.getHours():e.getHours(),minute:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}},blobToBin=function(e){var t=new FileReader;return t.readAsBinaryString(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))},blobToTxt=function(e){var t=new FileReader;return t.readAsText(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))},blobToArrayBuffer=function(e){var t=new FileReader;return t.readAsArrayBuffer(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))},successRes=function(e){return{error:!1,data:e}},errorRes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:!0,errMsg:e,e:t}},sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},getFileType=function(e){if(!e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.TXT;e=e.toLowerCase();var t,n=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.txtExts);try{for(n.s();!(t=n.n()).done;){if(t.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.TXT}}catch(x){n.e(x)}finally{n.f()}var r,a=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.imgExts);try{for(a.s();!(r=a.n()).done;){if(r.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.IMG}}catch(x){a.e(x)}finally{a.f()}var i,o=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.vidExts);try{for(o.s();!(i=o.n()).done;){if(i.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.VID}}catch(x){o.e(x)}finally{o.f()}var s,c=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.audExts);try{for(c.s();!(s=c.n()).done;){if(s.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.AUD}}catch(x){c.e(x)}finally{c.f()}var l,u=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.xmlExts);try{for(u.s();!(l=u.n()).done;){if(l.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.XML}}catch(x){u.e(x)}finally{u.f()}var d,h=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.jsExts);try{for(h.s();!(d=h.n()).done;){if(d.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.JS}}catch(x){h.e(x)}finally{h.f()}var p,f=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.docExts);try{for(f.s();!(p=f.n()).done;){if(p.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.DOC}}catch(x){f.e(x)}finally{f.f()}var b,j=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.pptExts);try{for(j.s();!(b=j.n()).done;){if(b.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.PPT}}catch(x){j.e(x)}finally{j.f()}var O,g=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.xlsExts);try{for(g.s();!(O=g.n()).done;){if(O.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.XLS}}catch(x){g.e(x)}finally{g.f()}var m,y=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.otherExts);try{for(y.s();!(m=y.n()).done;){if(m.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.OTHER}}catch(x){y.e(x)}finally{y.f()}var v,C=Object(E_UCLA_projects_WebOS_Interface_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(_config_js__WEBPACK_IMPORTED_MODULE_1__.a.cssExts);try{for(C.s();!(v=C.n()).done;){if(v.value===e)return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.CSS}}catch(x){C.e(x)}finally{C.f()}return _config_js__WEBPACK_IMPORTED_MODULE_1__.b.UNKNOWN}},93:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"signUpUser",(function(){return M})),n.d(r,"signOutUser",(function(){return N})),n.d(r,"signInUser",(function(){return R}));var a={};n.r(a),n.d(a,"handleInstallApp",(function(){return W}));var i={};n.r(i),n.d(i,"loadFileSystem",(function(){return Z})),n.d(i,"syncFileSystem",(function(){return $}));var o={};n.r(o),n.d(o,"updateUserInfo",(function(){return Q}));var s={};n.r(s),n.d(s,"getSystemData",(function(){return ee})),n.d(s,"setSystemData",(function(){return te}));var c,l=n(1),u=n(0),d=n.n(u),h=n(33),p=n.n(h),f=n(2),b=n(13),j=n(14),O=n(7),g=n(20),m=n(19),y={fullScreenContainer:{display:"flex",position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",overflow:"hidden"},row:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row"},column:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},hfull:{width:"100%"},vfull:{height:"100%"}},v=(n(63),n(11)),C=n.n(v),x=n(18),w=n(9),_=n(3),k=function(){var e=Object(x.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.gapi.load("client:auth2",Object(x.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.client.init({apiKey:_.d.API_KEY,client_id:_.d.CLIENT_ID,scope:"https://www.googleapis.com/auth/drive.file",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]});case 2:c=window.gapi.auth2.getAuthInstance();case 3:case"end":return e.stop()}}),e)}))));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),S=function(e){c.isSignedIn.listen(e)},D=function(){c.signIn()},E=function(){var e=Object(x.a)(C.a.mark((function e(){var t,n,r,a,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.gapi.client.drive,e.next=4,t.files.list({q:"mimeType = 'application/vnd.google-apps.folder' and name = 'WEBOS_FOLDER' and trashed = false",fields:"files(id, name)",spaces:"drive"});case 4:if(n=e.sent,1!==(r=n.result.files).length){e.next=10;break}return e.abrupt("return",{error:!1,folderId:r[0].id});case 10:if(0!==r.length){e.next=18;break}return a={name:"WEBOS_FOLDER",mimeType:"application/vnd.google-apps.folder"},e.next=14,t.files.create({resource:a,fields:"id"});case 14:return i=e.sent,e.abrupt("return",{error:!1,folderId:i.result.id});case 18:return e.abrupt("return",{error:!0});case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{error:!0});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(x.a)(C.a.mark((function e(t,n){var r,a,i,o,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={name:n.name,parents:[t]},(a=new FormData).append("metadata",new Blob([JSON.stringify(r)],{type:"application/json"})),i=c.currentUser.get().getAuthResponse(!0).access_token,a.append("file",n),e.next=8,fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",{method:"POST",headers:new Headers({Authorization:"Bearer "+i}),body:a});case 8:return o=e.sent,e.next=11,o.json();case 11:return s=e.sent,e.abrupt("return",{error:!1,fileId:s.id});case 15:return e.prev=15,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{error:!0});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(x.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.gapi.client.drive,e.next=4,n.files.get({fileId:t,fields:"webViewLink"});case 4:return r=e.sent,e.abrupt("return",{error:!1,fileUrl:r.result.webViewLink});case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{error:!0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(x.a)(C.a.mark((function e(t,n,r,a,i){var o,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(w.k)(n)){e.next=3;break}return i.setLoginErrMsg("Email is not valid"),e.abrupt("return");case 3:if(Object(w.m)(t)){e.next=6;break}return i.setLoginErrMsg("Username should only contain 8-16 alphanumeric characters"),e.abrupt("return");case 6:if(Object(w.l)(r)){e.next=9;break}return i.setLoginErrMsg("Password should only contain 8-16 alphanumeric characters"),e.abrupt("return");case 9:return e.prev=9,e.next=12,fetch(i.host+"/signUp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:t,email:n,password:r,userType:a}),credentials:"include"});case 12:if(200===(o=e.sent).status){e.next=15;break}return e.abrupt("return",Object(w.d)("Looks like there was a problem. Status Code: "+o.status));case 15:return e.next=17,o.json();case 17:if((s=e.sent).error){e.next=23;break}return i.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{userId:s.data._id,userInfo:s.data})})),e.abrupt("return",Object(w.j)());case 23:return i.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{errMsgs:Object(f.a)(Object(f.a)({},e.errMsgs),{},{login:s.errMsg})})})),e.abrupt("return",Object(w.d)(s.errMsg));case 25:e.next=30;break;case 27:return e.prev=27,e.t0=e.catch(9),e.abrupt("return",Object(w.d)("Fetch Error",e.t0));case 30:case"end":return e.stop()}}),e,null,[[9,27]])})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),N=function(){var e=Object(x.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.signOut(),e.prev=1,e.next=4,fetch(t.host+"/signOut",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});case 4:if(200===(n=e.sent).status){e.next=7;break}return e.abrupt("return",Object(w.d)("Looks like there was a problem. Status Code: "+n.status));case 7:return e.next=9,n.json();case 9:if((r=e.sent).error){e.next=15;break}return t.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{userId:null,userInfo:{}})})),e.abrupt("return",Object(w.j)());case 15:return t.setLoginErrMsg(r.error),e.abrupt("return",Object(w.d)(r.errMsg));case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(1),e.abrupt("return",Object(w.d)("Fetch Error",e.t0));case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(x.a)(C.a.mark((function e(t,n){var r,a,i,o,s=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]&&s[2],a=s.length>3?s[3]:void 0,r){e.next=9;break}if(Object(w.k)(t)){e.next=6;break}return a.setLoginErrMsg("Email is not valid"),e.abrupt("return");case 6:if(Object(w.l)(n)){e.next=9;break}return a.setLoginErrMsg("Password should only contain 8-16 alphanumeric characters"),e.abrupt("return");case 9:return e.prev=9,e.next=12,fetch(a.host+"/signIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n}),credentials:"include"});case 12:if(200===(i=e.sent).status){e.next=16;break}return console.log("Looks like there was a problem. Status Code: "+i.status),e.abrupt("return");case 16:return e.next=18,i.json();case 18:if((o=e.sent).error){e.next=27;break}return a.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{userId:o.data._id,userInfo:o.data})})),e.next=23,Object(w.i)(2e3);case 23:return a.setLoading(!1),e.abrupt("return",Object(w.j)());case 27:return r?a.setLoading(!1):a.setLoginErrMsg(o.error),e.abrupt("return",Object(w.d)(o.errMsg));case 29:e.next=34;break;case 31:return e.prev=31,e.t0=e.catch(9),e.abrupt("return",Object(w.d)("Fetch Error",e.t0));case 34:case"end":return e.stop()}}),e,null,[[9,31]])})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(x.a)(C.a.mark((function e(t,n){var r,a,i,o,s,c,l,u,d,h,p;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,a=t.hash,i=t.shareApp,o=t.appName,s=t.authorName,c=t.fileSize,l=t.iconUrl,u=n.state.fileSystem,d=u.getFile(a).getData(),u.installNewApp(o,d,l),!i){e.next=20;break}return e.prev=5,e.next=8,fetch(n.props.host+"/createApp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appName:o,authorName:s,authorId:r,size:c,iconUrl:l,raw:d})});case 8:if(200===(h=e.sent).status){e.next=11;break}return e.abrupt("return",Object(w.d)("Looks like there was a problem. Status Code: "+h.status));case 11:return e.next=13,h.text();case 13:return p=e.sent,e.abrupt("return",Object(w.j)(p));case 17:return e.prev=17,e.t0=e.catch(5),e.abrupt("return",Object(w.d)("Fetch Error",e.t0));case 20:return e.abrupt("return",Object(w.j)());case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t,n){return e.apply(this,arguments)}}(),L=n(17),P=n(16),T=n(36),A=Object(T.a)("data"),U=Object(T.a)("parent"),B=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(b.a)(this,e),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object(P.a)(this,U)[U]=r,this.metadata={name:t,hash:n,size:a.length,type:q.FILE,ext:i},Object(P.a)(this,A)[A]=a}return Object(j.a)(e,[{key:"changeParent",value:function(e){Object(P.a)(this,U)[U]=e}},{key:"changeName",value:function(e){this.metadata.name=e}},{key:"changeExt",value:function(e){this.metadata.ext=e}},{key:"saveData",value:function(e){Object(P.a)(this,A)[A]=e,this.metadata.size=e.length}},{key:"getMetaData",value:function(){return this.metadata}},{key:"getType",value:function(){return this.metadata.type}},{key:"getName",value:function(){return this.metadata.name}},{key:"getExt",value:function(){return this.metadata.ext}},{key:"getHash",value:function(){return this.metadata.hash}},{key:"getSize",value:function(){return Object(P.a)(this,A)[A].length}},{key:"getData",value:function(){return Object(P.a)(this,A)[A]}},{key:"getParent",value:function(){return Object(P.a)(this,U)[U]}},{key:"clone",value:function(){return new e(this.metadata.name,this.metadata.hash,Object(P.a)(this,U)[U],Object(P.a)(this,A)[A])}}]),e}(),H=Object(T.a)("parent"),z=Object(T.a)("children"),K=function(){function e(t,n,r,a){Object(b.a)(this,e),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object(P.a)(this,H)[H]=r,this.metadata={name:t,hash:n,type:q.DIR},Object(P.a)(this,z)[z]=a}return Object(j.a)(e,[{key:"changeParent",value:function(e){Object(P.a)(this,H)[H]=e}},{key:"changeName",value:function(e){this.metadata.name=e}},{key:"addChild",value:function(e,t){Object(P.a)(this,z)[z][e]=t}},{key:"removeChild",value:function(e){delete Object(P.a)(this,z)[z][e]}},{key:"getMetaData",value:function(){return this.metadata}},{key:"getType",value:function(){return this.metadata.type}},{key:"getName",value:function(){return this.metadata.name}},{key:"getHash",value:function(){return this.metadata.hash}},{key:"getData",value:function(){return this.data}},{key:"getParent",value:function(){return Object(P.a)(this,H)[H]}},{key:"getChildren",value:function(){return Object(P.a)(this,z)[z]}},{key:"getChildrenCount",value:function(){return Object.keys(Object(P.a)(this,z)[z]).length}},{key:"getChild",value:function(e){return Object(P.a)(this,z)[z][e]}},{key:"isBin",value:function(){return"bin"===this.metadata.hash}},{key:"isRoot",value:function(){return"root"===this.metadata.hash}},{key:"clone",value:function(){return new e(this.metadata.name,this.metadata.hash,Object(P.a)(this,H)[H],Object(P.a)(this,z)[z])}}]),e}(),V=Object(T.a)("data"),X=Object(T.a)("parent"),J=Object(T.a)("appData"),Y=function(){function e(t,n,r,a,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};Object(b.a)(this,e),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object(P.a)(this,X)[X]=r,this.metadata={name:t,hash:n,size:a.length,type:q.APP,icon:i},Object(P.a)(this,V)[V]=a,Object(P.a)(this,J)[J]=o}return Object(j.a)(e,[{key:"changeParent",value:function(e){Object(P.a)(this,X)[X]=e}},{key:"changeIcon",value:function(e){this.metadata.icon=e}},{key:"changeName",value:function(e){this.metadata.name=e}},{key:"saveData",value:function(e){Object(P.a)(this,V)[V]=e,this.metadata.size=e.length}},{key:"getStorage",value:function(e){return Object(P.a)(this,J)[J][e]}},{key:"getAppData",value:function(){return Object(P.a)(this,J)[J]}},{key:"setStorage",value:function(e,t){Object(P.a)(this,J)[J][e]=t}},{key:"getMetaData",value:function(){return this.metadata}},{key:"getIcon",value:function(){return this.metadata.icon}},{key:"getType",value:function(){return this.metadata.type}},{key:"getName",value:function(){return this.metadata.name}},{key:"getHash",value:function(){return this.metadata.hash}},{key:"getSize",value:function(){return Object(P.a)(this,V)[V].length}},{key:"getData",value:function(){return Object(P.a)(this,V)[V]}},{key:"getParent",value:function(){return Object(P.a)(this,X)[X]}},{key:"clone",value:function(){return new e(this.metadata.name,this.metadata.hash,Object(P.a)(this,X)[X],Object(P.a)(this,V)[V],this.metadata.icon)}}]),e}(),q={FILE:0,DIR:1,APP:2},G=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;Object(b.a)(this,e);var a=t.dirs,i=t.files,o=t.apps,s={},c={},l={};for(var u in a){var d=a[u];s[u]=new K(d.name,d.hash,d.parent,d.children)}for(var h in i){var p=i[h];c[h]=new B(p.name,p.hash,p.parent,p.data,p.ext)}for(var f in o){var j=o[f];l[f]=new Y(j.name,j.hash,j.parent,j.data,j.icon,j.appData)}this.dirNodes=s,this.fileNodes=c,this.appNodes=l,this.saveCallBacks=n,this.saveData=function(){var e,t=Object(L.a)(n);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(r){t.e(r)}finally{t.f()}},this.onRemove=function(){},this.onInstall=function(){},this.reportError=r}return Object(j.a)(e,[{key:"outputRawData",value:function(){var e={},t={},n={},r=this.dirNodes,a=this.fileNodes,i=this.appNodes;for(var o in r){var s=r[o];e[o]={name:s.getName(),hash:s.getHash(),parent:s.getParent(),children:s.getChildren(),type:s.getType()}}for(var c in a){var l=a[c];t[c]={name:l.getName(),hash:l.getHash(),parent:l.getParent(),data:l.getData(),type:l.getType(),ext:l.getExt()}}for(var u in i){var d=i[u];n[u]={name:d.getName(),hash:d.getHash(),parent:d.getParent(),data:d.getData(),type:d.getType(),icon:d.getIcon(),appData:d.getAppData()}}return{dirs:e,files:t,apps:n}}},{key:"addSaveCallBack",value:function(e){this.saveCallBacks.push(e)}},{key:"setOnRemove",value:function(e){this.onRemove=e}},{key:"_UNSAFE_RESET",value:function(){this.dirNodes={root:new K("root","root",null,{}),bin:new K("bin","bin",null,{})},this.fileNodes={},this.appNodes={},this.saveData()}},{key:"getFile",value:function(e){return this.fileNodes[e]}},{key:"getDirectory",value:function(e){return this.dirNodes[e]}},{key:"getApp",value:function(e){return this.appNodes[e]}},{key:"findDirPath",value:function(e){for(var t=[],n=this.dirNodes[e];null!==n.getParent();)t.push(n.getName()),n=this.dirNodes[n.getParent()];return t.push(n.getName()),t}},{key:"checkName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.dirNodes[e].getChildren();for(var a in r)if(a!==n){var i=r[a].name;if(t===i)return this.reportError("Name '"+t+"' has already been taken!"),!1}return!0}},{key:"checkDirectoryName",value:function(e){return""===e?(this.reportError("Directory name '"+e+"' cannot be empty!"),!1):!(e.length>=25)||(this.reportError("Directory name '"+e+"' exceeds the length limit!"),!1)}},{key:"checkFileName",value:function(e){return e?!(e.length>=25)||(this.reportError("File name '"+e+"' exceeds the length limit!"),!1):(this.reportError("File name '"+e+"' cannot be empty!"),!1)}},{key:"createNewDirectory",value:function(e,t){if(this.checkName(e,t)&&this.checkDirectoryName(t)){var n=Object(w.a)(),r=new K(t,n,e,{});return this.dirNodes[n]=r,this.dirNodes[e].addChild(n,r.getMetaData()),this.saveData(),n}return null}},{key:"createNewFile",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null===n||void 0===n)return this.reportError("The file data is corrupted"),null;if(this.checkName(e,t)&&this.checkFileName(t)){var a=Object(w.a)(),i=new B(t,a,e,n,r);return this.fileNodes[a]=i,this.dirNodes[e].addChild(a,i.getMetaData()),this.saveData(),a}return this.reportError("The file name '"+t+"' is already taken"),null}},{key:"installNewApp",value:function(e,t,n){var r=Object(w.a)(),a=new Y(e,r,null,t,n);return this.appNodes[r]=a,this.saveData(),r}},{key:"removeNode",value:function(e,t){this.moveNode(e,t,"bin"),this.onRemove()}},{key:"uninstallApp",value:function(e){delete this.appNodes[e],this.saveData()}},{key:"deepRemoveNode",value:function(e){var t=this.dirNodes.bin.getChild(e);t.type===q.DIR?this.deepRemoveDirectory(e):t.type===q.FILE&&this.deepRemoveFile(e)}},{key:"deepRemoveFile",value:function(e){var t=this.fileNodes[e];this.getDirectory(t.getParent()).removeChild(e),delete this.fileNodes[e],this.saveData()}},{key:"deepRemoveDirectory",value:function(e){var t=this.dirNodes[e],n=t.getChildren(),r=this.getDirectory(t.getParent());for(var a in n){var i=n[a];i.type===q.DIR?this.deepRemoveDirectory(i.hash):i.type===q.FILE&&this.deepRemoveFile(i.hash)}r.removeChild(e),delete this.dirNodes[e],this.saveData()}},{key:"retrieveDirectoryContent",value:function(e){return this.dirNodes[e].getChildren()}},{key:"retrieveApps",value:function(){return this.appNodes}},{key:"getDirectorySize",value:function(e){var t=this.retrieveDirectoryContent(e),n=0;for(var r in t)t[r].type===q.FILE?n+=t[r].size:n+=this.getDirectorySize(t[r].hash);return n}},{key:"moveNode",value:function(e,t,n){if(e!==t&&n!==t){if(this.dirNodes[e].getChild(t).type===q.DIR){var r=this.dirNodes[t];r.changeParent(n),this.dirNodes[e].removeChild(t),this.dirNodes[n].addChild(t,r.getMetaData())}else{var a=this.fileNodes[t];a.changeParent(n),this.dirNodes[e].removeChild(t),this.dirNodes[n].addChild(t,a.getMetaData())}this.saveData()}else this.reportError("Cannot move a directory into itself")}},{key:"installApp",value:function(e,t){var n=this.fileNodes[e],r=new Y(n.getName(),e,null,n.getData(),t);this.appNodes[e]=r,this.saveData(),this.onInstall()}},{key:"getAppStorage",value:function(e,t){return this.appNodes[e].getStorage(t)}},{key:"setAppStorage",value:function(e,t,n){this.appNodes[e].setStorage(t,n),this.saveData()}},{key:"changeFileName",value:function(e,t){var n=this.fileNodes[e],r=n.getParent();return!(!this.checkName(r,t,e)||!this.checkFileName(t))&&(n.changeName(t),this.dirNodes[n.getParent()].addChild(e,n.getMetaData()),this.saveData(),!0)}},{key:"changeDirectoryName",value:function(e,t){var n=this.dirNodes[e],r=n.getParent();return!(!this.checkName(r,t,e)||!this.checkDirectoryName(t))&&(n.changeName(t),this.dirNodes[n.getParent()].addChild(e,n.getMetaData()),this.saveData(),!0)}},{key:"saveFile",value:function(e,t){this.fileNodes[e].saveData(t),this.saveData()}}]),e}(),Z=function(){var e=Object(x.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t.props.host+"/getFS/"+t.props.userId);case 3:if(200===(n=e.sent).status){e.next=6;break}return e.abrupt("return",Object(w.d)("Looks like there was a problem. Status Code: "+n.status));case 6:return e.next=8,n.json();case 8:return r=e.sent,t.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{fileSystem:new G(r.data,[t.setDataChanged],alert.bind(window))})})),t.props.setLoading(!1),e.abrupt("return",Object(w.j)(r));case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",Object(w.d)("Fetch Error",e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(x.a)(C.a.mark((function e(t){var n,r,a,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.state.fileSystem)){e.next=20;break}return r=n.outputRawData(),console.log(r),e.prev=4,e.next=7,fetch(t.props.host+"/setFS/"+t.props.userId,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});case 7:if(200===(a=e.sent).status){e.next=10;break}return e.abrupt("return",Object(w.d)("Looks like there was a problem. Status Code: "+a.status));case 10:return t.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{saved:!0})})),e.next=13,a.text();case 13:return i=e.sent,e.abrupt("return",Object(w.j)(i));case 17:return e.prev=17,e.t0=e.catch(4),e.abrupt("return",Object(w.d)("Fetch Error",e.t0));case 20:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(x.a)(C.a.mark((function e(t,n){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(f.a)(Object(f.a)({},t),{},{userId:n.state.userId}),e.prev=1,e.next=4,fetch(n.host+"/updateInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});case 4:if(200===(r=e.sent).status){e.next=8;break}return console.log("Looks like there was a problem. Status Code: "+r.status),e.abrupt("return");case 8:return e.next=10,r.json();case 10:if((a=e.sent).error){e.next=16;break}return n.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{userInfo:Object(f.a)(Object(f.a)({},e.userInfo),t)})})),e.abrupt("return",Object(w.j)());case 16:return e.abrupt("return",Object(w.d)(a.errMsg));case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(1),e.abrupt("return",Object(w.d)("Fetch Error",e.t0));case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(x.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t.props.host+"/getSD/"+t.props.userId);case 3:if(200===(n=e.sent).status){e.next=6;break}return e.abrupt("return",Object(w.d)("Looks like there was a problem. Status Code: "+n.status));case 6:return e.next=8,n.json();case 8:return r=e.sent,t.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{systemData:r.data})})),e.abrupt("return",Object(w.j)(r));case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Object(w.d)("Fetch Error",e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(x.a)(C.a.mark((function e(t,n){var r,a,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state.systemData,r=Object(f.a)(Object(f.a)({},r),t),e.prev=2,e.next=5,fetch(n.props.host+"/setSD/"+n.props.userId,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});case 5:if(200===(a=e.sent).status){e.next=8;break}return e.abrupt("return",Object(w.d)("Looks like there was a problem. Status Code: "+a.status));case 8:return e.next=10,a.json();case 10:return i=e.sent,n.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{systemData:r})})),e.abrupt("return",Object(w.j)(i));case 15:return e.prev=15,e.t0=e.catch(2),e.abrupt("return",Object(w.d)("Fetch Error",e.t0));case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n){return e.apply(this,arguments)}}(),ne=Object(f.a)(Object(f.a)(Object(f.a)(Object(f.a)(Object(f.a)({},r),a),i),o),s),re=0,ae=1,ie=2,oe=3,se=4,ce=function(){function e(t,n){Object(b.a)(this,e),this.explorers=[],this.media=[],this.files=[],this.raw=[],this.apps=[],this.saveCallBack=n,this.processWindows(t)}return Object(j.a)(e,[{key:"processWindows",value:function(e){var t,n=Object(L.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;switch(r.type){case re:this.explorers.push(r.meta);break;case ae:this.media.push(r.meta);break;case ie:case oe:case se:this.files.push(r.meta)}}}catch(a){n.e(a)}finally{n.f()}}},{key:"encodeWindows",value:function(){var e=[];for(var t in this.explorers)e.push({type:re,meta:t});for(var n in this.media)e.push({type:ae,meta:n});for(var r in this.files)e.push({type:ie,meta:r});for(var a in this.raw)e.push({type:oe,meta:a});for(var i in this.apps)e.push({type:se,meta:i});return e}},{key:"getWindow",value:function(e,t){switch(t){case re:return this.explorers[e];case ae:return this.media[e];case ie:return this.files[e];case oe:return this.raw[e];case se:return this.apps[e];default:return null}}},{key:"addWindow",value:function(e,t){switch(t){case re:this.explorers.push(e);break;case ae:this.media.push(e);break;case ie:case oe:case se:this.files.push(e)}this.saveCallBack()}},{key:"deleteWindow",value:function(e,t){switch(t){case re:this.explorers.splice(e,1);break;case ae:this.media.splice(e,1);break;case ie:case oe:case se:this.files.splice(e,1)}this.saveCallBack()}},{key:"popWindow",value:function(e,t){var n=this.getWindow(e,t);if(null===n)return!1;this.deleteWindow(e,t),this.addWindow(n,t),this.saveCallBack()}}]),e}(),le=n(23),ue=n(15),de={container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:_.e.contentTextColor,padding:10},icon:{display:"flex",width:50,height:50,justifyContent:"center",alignItems:"center",borderRadius:"50%",backgroundColor:_.e.transparentBlack,boxShadow:"0 0 5px rgba(255,255,255,0.8)",margin:5},input:{fontSize:15,width:80,borderRadius:5,flex:1,fontFamily:"roboto",textShadow:"0 0 5px white",padding:2,outline:"none",border:"none",backgroundColor:_.e.transparentBlack,color:_.e.optionTextColor},name:{flex:1,fontSize:15,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",textAlign:"center",fontFamily:"roboto",textShadow:"0 0 5px white",whiteSpace:"nowrap"}},he=function(e){var t=e.height,n=e.width,r=e.icon,a=e.type,i=e.name,o=e.nameOnChange,s=e.onClick,c=e.onRightClick,d=void 0===c?function(){}:c,h=e.setNameOnChange,p=e.saveName,b=e.nameChangable,j=void 0===b||b,O=e.draggable,g=void 0!==O&&O,m=e.onDragStart,y=e.onDragEnd,v=Object(u.useState)(i),C=Object(ue.a)(v,2),x=C[0],_=C[1];return Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},de.container),{},{width:n,height:t}),draggable:g,onDragStart:m,onDragEnd:y,children:[Object(l.jsx)("div",{style:de.icon,onClick:s,onContextMenu:d,onMouseOver:function(e){e.target.style.opacity=.5},onMouseOut:function(e){e.target.style.opacity=1},children:r}),o?Object(l.jsx)("input",{style:de.input,type:"text",value:x,autoFocus:!0,onFocus:function(e){e.target.select()},onChange:function(e){_(e.target.value)},spellCheck:!1,onKeyDown:function(e){"Enter"===e.key?p(x,a):"Escape"===e.key&&(h(!1),_(i))}}):Object(l.jsx)("div",{style:Object(f.a)({},de.name),onClick:function(){j&&h(!0)},children:Object(w.h)(i,12,"...")})]})},pe={container:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"},entry:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},input:{fontSize:15,borderRadius:5,flex:1,fontFamily:"roboto",textShadow:"0 0 5px white",padding:2,outline:"none",border:"none",backgroundColor:_.e.transparentBlack,color:_.e.optionTextColor}},fe=function(e){var t=e.index,n=e.entry,r=e.entryStyle,a=e.rowHeight,i=Object(u.useState)(n.value),o=Object(ue.a)(i,2),s=o[0],c=o[1];return Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},pe.entry),{},{height:a},r),onClick:n.func,onContextMenu:n.contextFunc,onMouseOver:function(e){e.target.style.opacity=.5},onMouseOut:function(e){e.target.style.opacity=1},children:n.valueOnChange?Object(l.jsx)("input",{style:pe.input,type:"text",value:s,autoFocus:!0,onFocus:function(e){e.target.select()},spellCheck:!1,onChange:function(e){c(e.target.value)},onKeyDown:function(e){"Enter"===e.key?n.enterFunc(s):"Escape"===e.key&&(n.cancelFunc(),c(n.value))}},t):n.content},t)},be=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props.entries.map((function(t,n){return Object(l.jsx)(fe,{entry:t,rowHeight:e.props.rowHeight,entryStyle:e.props.entryStyle,index:n},n)}));return Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},pe.container),this.props.containerStyle),children:t})}}]),n}(d.a.Component),je={container:{position:"fixed",fontFamily:"roboto",backgroundColor:_.e.optionColor,color:_.e.optionTextColor,fontSize:13},option:{padding:5}},Oe=function(e){var t=e.entries,n=e.top,r=e.left;return Object(l.jsx)(be,{entries:t,rowHeight:20,containerStyle:Object(f.a)(Object(f.a)({},je.container),{},{top:n,left:r}),entryStyle:je.option})},ge={display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},me=function(e){var t=e.children,n=e.onClick,r=e.style;return Object(l.jsx)("div",{onMouseOver:function(e){return e.target.style.opacity=.5},onMouseOut:function(e){return e.target.style.opacity=1},style:Object(f.a)(Object(f.a)({},ge),r),onClick:n,children:t})},ye=function(e){var t=e.children,n=e.onClick,r=e.style;return Object(l.jsx)(me,{onClick:n,style:Object(f.a)({borderRadius:10,padding:10,backgroundColor:_.e.contentColor,color:_.e.contentTextColor,fontFamily:"roboto"},r),children:t})},ve={container:{borderRadius:20,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"stretch"},textContainer:{flex:1,fontFamily:"roboto",display:"flex",justifyContent:"center",alignItems:"center",padding:10,fontWeight:"bold",textAlign:"center"},leftButton:{borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:20,borderBottomRightRadius:0,border:"1px solid #FFFFFF55",flex:1},rightButton:{borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:20,border:"1px solid #FFFFFF55",flex:1}},Ce=function(e){var t=e.width,n=void 0===t?300:t,r=e.height,a=void 0===r?200:r,i=e.leftText,o=e.leftFunc,s=e.rightText,c=e.rightFunc,u=e.children;return Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},y.fullScreenContainer),{},{backgroundColor:_.e.transparentBlack}),children:Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},ve.container),{},{width:n,height:a,backgroundColor:_.e.transparentWhite}),children:[Object(l.jsx)("div",{style:ve.textContainer,children:u}),Object(l.jsxs)("div",{style:{display:"flex"},children:[Object(l.jsx)(ye,{style:ve.leftButton,onClick:o,children:i}),Object(l.jsx)(ye,{style:ve.rightButton,onClick:c,children:s})]})]})})},xe=function(e){var t=e.setModalOn;return Object(u.useEffect)((function(){S((function(e){console.log(e),t(!e)}))}),[]),Object(l.jsx)(Ce,{leftText:"Authorize",leftFunc:D,rightText:"Cancel",rightFunc:function(){t(!1)},children:"The file cannot be processed by WebOS. Would you like to authorize WebOS to connect with your Google Drive and upload files of this type?"})},we={section:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:_.e.transparentBlack,borderRadius:20,margin:10,maxWidth:800,minWidth:200,transition:"width 0.2s"},title:{fontSize:24,color:_.e.optionTextColor,fontFamily:"roboto",margin:10,textShadow:"0 0 5px white"},appBar:{display:"flex",alignItems:"center",flexDirection:"row",margin:0,alignSelf:"stretch",justifyContent:"flex-start",flexWrap:"wrap"}},_e=n(104),ke=n(105),Se=n(106),De=n(107),Ee=n(108),Ie=n(109),Fe=n(110),Me=n(111),Ne=n(112),Re=n(113),We=n(114),Le=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).handleDrop=function(){var e=Object(x.a)(C.a.mark((function e(t){var n,a,i,o,s,l,u,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!((n=t.dataTransfer.files).length>0)){e.next=24;break}a=Object(L.a)(n),e.prev=4,o=C.a.mark((function e(){var t,n,a,o,s,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.value,console.log(t),n=t.name.split(".")[0],a=t.name.split(".")[1],(o=Object(w.g)(a))!==_.b.UNKNOWN){e.next=9;break}alert("Cannot recognize the target file"),e.next=39;break;case 9:if(s=null,o!==_.b.TXT&&o!==_.b.XML&&o!==_.b.CSS&&o!==_.b.JS){e.next=16;break}return e.next=13,Object(w.c)(t);case 13:s=e.sent,e.next=37;break;case 16:if(o!==_.b.IMG&&o!==_.b.VID){e.next=22;break}return e.next=19,Object(w.b)(t);case 19:s=e.sent,e.next=37;break;case 22:if(o!==_.b.DOC&&o!==_.b.XLS&&o!==_.b.PPT){e.next=34;break}if(l=function(){var e=Object(x.a)(C.a.mark((function e(){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:if((n=e.sent).error){e.next=12;break}return e.next=6,I(n.folderId,t);case 6:if((r=e.sent).error){e.next=12;break}return e.next=10,F(r.fileId);case 10:(a=e.sent).error||(s=a.fileUrl);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c&&c.isSignedIn.get()){e.next=30;break}return r.setGoogleModalOn(!0),S(function(){var e=Object(x.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,l();case 3:r.props.fileSystem.createNewFile(r.state.currentDirectory.getHash(),n,s,a),r.reloadCurrentContent();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",{v:void 0});case 30:return e.next=32,l();case 32:e.next=37;break;case 34:return e.next=36,Object(w.c)(t);case 36:s=e.sent;case 37:r.props.fileSystem.createNewFile(r.state.currentDirectory.getHash(),n,s,a),r.reloadCurrentContent();case 39:case"end":return e.stop()}}),e)})),a.s();case 7:if((i=a.n()).done){e.next=14;break}return e.delegateYield(o(),"t0",9);case 9:if("object"!==typeof(s=e.t0)){e.next=12;break}return e.abrupt("return",s.v);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(4),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:e.next=29;break;case 24:l=t.dataTransfer.getData("hash"),u=t.dataTransfer.getData("parent"),d=r.state.currentDirectory.getHash(),r.props.fileSystem.moveNode(u,l,d),r.reloadCurrentContent();case 29:case"end":return e.stop()}}),e,null,[[4,16,19,22]])})));return function(t){return e.apply(this,arguments)}}(),r.state={currentDirectory:null,currentContent:{},popUpOn:!1,popUpPosition:{},popUpEntries:[],googleModalOn:!1},r.changeCurrentDirectory=r.changeCurrentDirectory.bind(Object(O.a)(r)),r.reloadCurrentContent=r.reloadCurrentContent.bind(Object(O.a)(r)),r.createFile=r.createFile.bind(Object(O.a)(r)),r.createDirectory=r.createDirectory.bind(Object(O.a)(r)),r.setNameOnChange=r.setNameOnChange.bind(Object(O.a)(r)),r.setGoogleModalOn=r.setGoogleModalOn.bind(Object(O.a)(r)),r.saveName=r.saveName.bind(Object(O.a)(r)),r.setPopUp=r.setPopUp.bind(Object(O.a)(r)),r.closePopUp=r.closePopUp.bind(Object(O.a)(r)),r.handleAppClick=r.handleAppClick.bind(Object(O.a)(r)),r.handleAppContextMenu=r.handleAppContextMenu.bind(Object(O.a)(r)),r.handleAppDrag=r.handleAppDrag.bind(Object(O.a)(r)),r.handleDrop=r.handleDrop.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.fileSystem.addSaveCallBack(this.reloadCurrentContent),this.props.root&&this.changeCurrentDirectory(this.props.root),"bin"===this.props.root&&this.props.fileSystem.setOnRemove((function(){return e.changeCurrentDirectory(e.props.root)}))}},{key:"setGoogleModalOn",value:function(e){this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{googleModalOn:e})}))}},{key:"changeCurrentDirectory",value:function(e){var t=this.props.fileSystem.getDirectory(e),n=t.getChildren();for(var r in n=Object(f.a)({},n))n[r]={metadata:n[r],nameOnChange:!1};this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentDirectory:t,currentContent:n})}))}},{key:"reloadCurrentContent",value:function(){var e=this.state.currentDirectory.getChildren();for(var t in e=Object(f.a)({},e))e[t]={metadata:e[t],nameOnChange:!1};this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{popUpOn:!1,currentContent:e})}))}},{key:"createFile",value:function(){this.props.fileSystem.createNewFile(this.state.currentDirectory.getHash(),"New File",""),this.reloadCurrentContent()}},{key:"createDirectory",value:function(){this.props.fileSystem.createNewDirectory(this.state.currentDirectory.getHash(),"New Folder"),this.reloadCurrentContent()}},{key:"deleteNode",value:function(e){this.state.currentDirectory.isBin()?this.props.fileSystem.deepRemoveNode(e):this.props.fileSystem.removeNode(this.state.currentDirectory.getHash(),e),this.reloadCurrentContent()}},{key:"setNameOnChange",value:function(e,t){var n=this.state.currentContent;n[e].nameOnChange=t,this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentContent:n})}))}},{key:"closePopUp",value:function(e){e.preventDefault(),"click"===e.type?window.removeEventListener("click",this.closePopUp):window.removeEventListener("contextmenu",this.closePopUp),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{popUpOn:!1})}))}},{key:"setPopUp",value:function(e,t,n){this.setState((function(r){return Object(f.a)(Object(f.a)({},r),{},{popUpOn:!0,popUpPosition:{x:e,y:t},popUpEntries:n})}))}},{key:"saveName",value:function(e,t,n){n===q.FILE?this.props.fileSystem.changeFileName(e,t):this.props.fileSystem.changeDirectoryName(e,t),this.reloadCurrentContent()}},{key:"handleAppClick",value:function(e){if(e.type===q.DIR)this.changeCurrentDirectory(e.hash);else switch(Object(w.g)(e.ext)){case _.b.TXT:case _.b.JS:case _.b.XML:case _.b.CSS:this.props.addCurrentFile(e.hash);break;case _.b.IMG:case _.b.VID:this.props.addCurrentWindow(e.hash);break;case _.b.DOC:case _.b.PPT:case _.b.XLS:this.props.addCurrentWindow(e.hash);break;default:this.props.addCurrentFile(e.hash)}}},{key:"handleAppDrag",value:function(e,t,n){e.dataTransfer.setData("hash",t),e.dataTransfer.setData("parent",n)}},{key:"handleBinContextMenu",value:function(e,t){var n=this;window.addEventListener("click",this.closePopUp),e.preventDefault(),this.setPopUp(e.clientX,e.clientY,[{content:"Deep Delete",func:function(){return n.deleteNode(t.hash)}}])}},{key:"handleAppContextMenu",value:function(e,t){var n=this;window.addEventListener("click",this.closePopUp),e.preventDefault(),t.type===q.DIR?this.setPopUp(e.clientX,e.clientY,[{content:"Delete",func:function(){return n.deleteNode(t.hash)}},{content:"Rename",func:function(){n.setNameOnChange(t.hash,!0)}},{content:"Open with code editor",func:function(){n.props.setCodeEditorRoot(t.hash)}},{content:"Open in new window",func:function(){n.props.openWindow(t.hash)}}]):t.type===q.FILE&&this.setPopUp(e.clientX,e.clientY,[{content:"Delete",func:function(){return n.deleteNode(t.hash)}},{content:"Rename",func:function(){n.setNameOnChange(t.hash,!0)}},{content:"Open with code editor",func:function(){n.props.setCodeEditorRoot(n.props.fileSystem.getFile(t.hash).getParent())}},{content:"Open as web app",func:function(){n.props.addCurrentWindow(t.hash)}},{content:"Install as web app",func:function(){n.props.setInstallHash(t.hash)}}])}},{key:"render",value:function(){var e=this,t=[],n=this.state.currentDirectory,r=this.state.currentContent;if(n&&r!=={}){var a=n.getParent();a&&t.push(Object(l.jsx)(he,{icon:Object(l.jsx)(_e.a,{style:{fontSize:30,color:_.e.red}}),name:"Back",type:null,width:100,height:110,onClick:function(t){e.changeCurrentDirectory(a)},nameOnChange:!1,nameChangable:!1},"back_btn"));var i=function(a){var i=r[a].metadata;t.push(Object(l.jsx)(he,{icon:i.type===q.DIR?Object(l.jsx)(ke.a,{style:{fontSize:30},twoToneColor:_.e.yellow}):Object(w.g)(i.ext)===_.b.IMG?Object(l.jsx)(Se.a,{style:{fontSize:30},twoToneColor:_.e.yellow}):Object(w.g)(i.ext)===_.b.VID?Object(l.jsx)(De.a,{style:{fontSize:30},twoToneColor:_.e.yellow}):Object(w.g)(i.ext)===_.b.XML?Object(l.jsx)(Ee.a,{style:{fontSize:30},twoToneColor:_.e.yellow}):Object(w.g)(i.ext)===_.b.JS?Object(l.jsx)(Ie.a,{style:{fontSize:30},twoToneColor:_.e.yellow}):Object(w.g)(i.ext)===_.b.DOC?Object(l.jsx)(Fe.a,{style:{fontSize:30},twoToneColor:_.e.yellow}):Object(w.g)(i.ext)===_.b.PPT?Object(l.jsx)(Me.a,{style:{fontSize:30},twoToneColor:_.e.yellow}):Object(w.g)(i.ext)===_.b.XLS?Object(l.jsx)(Ne.a,{style:{fontSize:30},twoToneColor:_.e.yellow}):Object(l.jsx)(Re.a,{style:{fontSize:30},twoToneColor:_.e.yellow}),name:i.name,type:i.type,width:100,height:110,onClick:function(t){"bin"===n.getHash()?alert("Cannot open nodes inside the recycle bin!"):e.handleAppClick(i)},onRightClick:function(t){"bin"===n.getHash()?e.handleBinContextMenu(t,i):e.handleAppContextMenu(t,i)},draggable:!0,onDragStart:function(t){return e.handleAppDrag(t,i.hash,n.getHash())},onDragEnd:function(t){"none"===t.dataTransfer.dragEffect?console.log("no effect"):e.reloadCurrentContent()},nameOnChange:r[a].nameOnChange,setNameOnChange:function(t){return e.setNameOnChange(a,t)},saveName:function(t,n){return e.saveName(a,t,n)}},i.hash))};for(var o in r)i(o);"bin"!==n.getHash()&&t.push(Object(l.jsx)(he,{icon:Object(l.jsx)(We.a,{style:{fontSize:30,color:_.e.green}}),name:"Create",width:100,height:110,onClick:function(t){t.stopPropagation(),window.addEventListener("click",e.closePopUp),e.setPopUp(t.clientX,t.clientY,[{content:"Create File",func:e.createFile},{content:"Create Folder",func:e.createDirectory}])},nameChangable:!1,nameOnChange:!1},"create_btn"))}return Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},we.section),{},{width:100*Math.floor(.9*this.props.dims.width/100)},this.props.style),onDragOver:function(e){e.preventDefault()},onDrop:function(t){return e.handleDrop(t)},children:[this.state.googleModalOn&&Object(l.jsx)(xe,{setModalOn:this.setGoogleModalOn}),n?"root"===n.getHash()?Object(l.jsx)("div",{style:we.title,children:"File Explorer"}):"bin"===n.getHash()?Object(l.jsx)("div",{style:we.title,children:"Recycle Bin"}):Object(l.jsx)("div",{style:we.title,children:n.getName()}):Object(l.jsx)(l.Fragment,{}),Object(l.jsxs)("div",{style:we.appBar,children:[this.state.popUpOn&&Object(l.jsx)(Oe,{top:this.state.popUpPosition.y,left:this.state.popUpPosition.x,entries:this.state.popUpEntries}),t]})]})}}]),n}(d.a.Component),Pe={panel:{position:"absolute",top:0,right:0,left:0,height:25,display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",backgroundColor:_.e.optionColor,borderTopLeftRadius:5,borderTopRightRadius:5},title:{flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",paddingLeft:10,color:_.e.optionTextColor,fontFamily:"roboto",whiteSpace:"nowrap",cursor:"grab",overflow:"hidden"},controlBtn:{margin:2,height:16,width:16,borderRadius:8,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},content:{position:"absolute",top:25,bottom:0,left:0,right:0,display:"flex",flex:1,borderBottomLeftRadius:5,borderBottomRightRadius:5,flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",overflow:"auto"}},Te=n(115),Ae=n(101),Ue=function(e){var t=e.children,n=e.id,r=e.style,a=e.draggable,i=e.headerRef,o=e.changePosition,s=e.onClick,c=void 0===s?function(){}:s,d=e.onFinishDrag,h=void 0===d?function(){}:d,p=Object(u.useRef)(0),f=Object(u.useRef)(0),b=Object(u.useRef)(),j=Object(u.useCallback)((function(e){var t=b.current;(e=e||window.event).preventDefault();var n=Math.max(0,Math.min(e.clientX,window.innerWidth)),r=Math.max(0,Math.min(e.clientY,window.innerHeight)),a=p.current-n,i=f.current-r;p.current=n,f.current=r,t.style.top=Math.max(0,Math.min(t.offsetTop-i,window.innerHeight-25))+"px",t.style.left=Math.max(0,Math.min(t.offsetLeft-a,window.innerWidth-120))+"px"}),[]),O=Object(u.useCallback)((function(e){var t=b.current;i.current.style.cursor="grab",b.current.style.transition="top 0.1s, left 0.1s",o(t.style.left,t.style.top),document.removeEventListener("mouseup",O),document.removeEventListener("mousemove",j);var n,r=document.getElementsByTagName("iframe"),a=Object(L.a)(r);try{for(a.s();!(n=a.n()).done;){n.value.style.pointerEvents="auto"}}catch(s){a.e(s)}finally{a.f()}h(t.style.left,t.style.top)}),[]),g=Object(u.useCallback)((function(e){(e=e||window.event).preventDefault(),p.current=e.clientX,f.current=e.clientY,i.current.style.cursor="grabbing",b.current.style.transition="none",document.addEventListener("mouseup",O),document.addEventListener("mousemove",j);var t,n=document.getElementsByTagName("iframe"),r=Object(L.a)(n);try{for(r.s();!(t=r.n()).done;){t.value.style.pointerEvents="none"}}catch(a){r.e(a)}finally{r.f()}}),[]);return Object(u.useEffect)((function(){return a?i.current.addEventListener("mousedown",g):(i.current.removeEventListener("mousedown",g),document.removeEventListener("mouseup",O),document.removeEventListener("mousemove",j),b.current.style.top=0,b.current.style.left=0),function(){i.current&&i.current.removeEventListener("mousedown",g)}}),[a]),Object(l.jsx)("div",{id:n+"_window",ref:function(e){b.current=e},style:r,onClick:c,children:t})},Be={frame:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",position:"absolute",backgroundColor:_.e.backgroundTheme,boxShadow:"0 0 10px rgba(0,0,0,0.5)"},resizerR:{position:"absolute",cursor:"col-resize",height:"100%",right:-5,top:0,width:"5px"},resizerB:{position:"absolute",cursor:"row-resize",height:"5px",left:0,bottom:-5,width:"100%"}},He=function(e){var t=e.children,n=e.resizeable,r=e.screenMode,a=e.onResize,i=e.style,o=e.initWidth,s=e.initHeight,c=e.minWidth,d=e.minHeight,h=e.onFinishResize,p=void 0===h?function(){}:h,b=Object(u.useRef)(o),j=Object(u.useRef)(s),O=Object(u.useRef)(0),g=Object(u.useRef)(0),m=Object(u.useRef)(),y=Object(u.useRef)(),v=Object(u.useRef)();Object(u.useEffect)((function(){0===r?(a(0,0),setTimeout((function(){return p(0,0)}),100)):1===r?(a(b.current,j.current),setTimeout((function(){return p(b.current,j.current)}),100)):2===r&&(a(window.innerWidth,window.innerHeight),setTimeout((function(){return p(window.innerWidth,window.innerHeight)}),100))}),[r]),Object(u.useEffect)((function(){n?(y.current.addEventListener("mousedown",w),v.current.addEventListener("mousedown",w)):(y.current.removeEventListener("mousedown",w),v.current.removeEventListener("mousedown",w),window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",x))}),[n]);var C=Object(u.useCallback)((function(e){(e=e||window.event).preventDefault();var t=e.clientX-O.current,n=e.clientY-g.current,r=Math.max(c,Math.min(b.current+t,window.innerWidth)),i=Math.max(d,Math.min(j.current+n,window.innerWidth));m.current.style.width="".concat(r,"px"),m.current.style.height="".concat(i,"px"),a(r,i)}),[]),x=Object(u.useCallback)((function(e){e=e||window.event,b.current=Number(m.current.style.width.replace(/\D/g,"")),j.current=Number(m.current.style.height.replace(/\D/g,"")),m.current.style.transition="width 0.1s, height 0.1s",window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",x);var t,n=document.getElementsByTagName("iframe"),r=Object(L.a)(n);try{for(r.s();!(t=r.n()).done;){t.value.style.pointerEvents="auto"}}catch(a){r.e(a)}finally{r.f()}p(b.current,j.current)}),[]),w=Object(u.useCallback)((function(e){e=e||window.event,O.current=e.clientX,g.current=e.clientY,m.current.style.transition="none";var t=window.getComputedStyle(m.current);b.current=parseInt(t.width,10),j.current=parseInt(t.height,10),window.addEventListener("mousemove",C),window.addEventListener("mouseup",x);var n,r=document.getElementsByTagName("iframe"),a=Object(L.a)(r);try{for(a.s();!(n=a.n()).done;){n.value.style.pointerEvents="none"}}catch(i){a.e(i)}finally{a.f()}}),[]);return Object(l.jsxs)("div",{ref:m,style:Object(f.a)(Object(f.a)({},Be.frame),{},{width:0===r?120:2===r?window.innerWidth:b.current,height:0===r?0:2===r?window.innerHeight:j.current,transition:"width 0.1s, height 0.1s"},i),children:[t,Object(l.jsx)("div",{ref:y,style:Be.resizerB}),Object(l.jsx)("div",{ref:v,style:Be.resizerR})]})},ze=function(e){var t=e.id,n=e.top,r=e.left,a=e.name,i=e.children,o=e.width,s=void 0===o?400:o,c=e.height,d=void 0===c?400:c,h=e.minWidth,p=void 0===h?200:h,b=e.minHeight,j=void 0===b?200:b,O=e.onClick,g=void 0===O?function(){}:O,m=e.onCancel,y=void 0===m?function(){}:m,v=e.onResize,C=void 0===v?function(){}:v,x=e.onFinishResize,k=void 0===x?function(){}:x,S=e.onFinishDrag,D=void 0===S?function(){}:S,E=Object(u.useState)(1),I=Object(ue.a)(E,2),F=I[0],M=I[1],N=Object(u.useState)(n),R=Object(ue.a)(N,2),W=R[0],L=R[1],P=Object(u.useState)(r),T=Object(ue.a)(P,2),A=T[0],U=T[1],B=Object(u.useRef)(),H=function(e){e.target.style.opacity=.5},z=function(e){e.target.style.opacity=1},K=function(e){M(Math.max(0,Math.min(2,F+e)))},V=Object(l.jsxs)("div",{style:Pe.panel,children:[Object(l.jsx)("div",{style:Pe.title,ref:B,children:0===F?Object(w.h)(a,8,"..."):1===F?Object(w.h)(a,25,"..."):Object(w.h)(a,50,"...")}),0===F?Object(l.jsx)(l.Fragment,{}):Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Pe.controlBtn),{},{backgroundColor:_.e.green}),onClick:function(){return K(-1)},onMouseOver:H,onMouseOut:z,children:Object(l.jsx)(Te.a,{style:{fontSize:10,color:_.e.transparentBlack}})}),2===F?Object(l.jsx)(l.Fragment,{}):Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Pe.controlBtn),{},{backgroundColor:_.e.yellow}),onClick:function(){return K(1)},onMouseOver:H,onMouseOut:z,children:Object(l.jsx)(We.a,{style:{fontSize:10,color:_.e.transparentBlack}})}),Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Pe.controlBtn),{},{backgroundColor:_.e.red}),onClick:y,onMouseOver:H,onMouseOut:z,children:Object(l.jsx)(Ae.a,{style:{fontSize:10,color:_.e.transparentBlack}})})]});return Object(l.jsx)(Ue,{id:t,draggable:1===F||0===F,headerRef:B,changePosition:function(e,t){U(e),L(t)},onClick:g,onFinishDrag:D,style:2===F?{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:_.e.windowBackground,zIndex:11,transition:"top 0.1s, left 0.1s"}:{position:"fixed",top:W,left:A,backgroundColor:_.e.windowBackground,zIndex:11,transition:"top 0.1s, left 0.1s"},children:Object(l.jsxs)(He,{resizeable:0!==F,screenMode:F,onResize:C,onFinishResize:k,initWidth:s,initHeight:d,minWidth:p,minHeight:j,style:{border:1===F?"1px solid white":"none",borderRadius:1===F?5:0},children:[V,Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Pe.content),{},{display:0===F?"none":"flex"}),children:i})]})})},Ke=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={width:null,height:null},r.resizeWindow=r.resizeWindow.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"resizeWindow",value:function(e,t){this.setState((function(n){return Object(f.a)(Object(f.a)({},n),{},{width:e,height:t})}))}},{key:"render",value:function(){return Object(l.jsx)(ze,{id:this.props.id,top:0,left:0,name:"File Explorer",onClick:this.props.onFocus,onCancel:this.props.closeWindow,onResize:this.resizeWindow,children:Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},y.column),{},{alignSelf:"stretch"}),children:Object(l.jsx)(Le,{fileSystem:this.props.fileSystem,setCodeEditorRoot:this.props.setCodeEditorRoot,setInstallHash:this.props.setInstallHash,root:this.props.root,dims:{width:this.state.width,height:this.state.height},openWindow:this.props.openWindow,addCurrentFile:this.props.addCurrentFile,addCurrentWindow:this.props.addCurrentWindow,closeCurrentWindow:this.props.closeCurrentWindow,closeCurrentFile:this.props.closeCurrentFile,saveCurrentFile:this.props.saveCurrentFile})})})}}]),n}(d.a.Component),Ve={section:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:_.e.transparentBlack,borderRadius:20,margin:10,maxWidth:800,transition:"width 0.2s"},title:{fontSize:24,color:_.e.optionTextColor,fontFamily:"roboto",margin:10,textShadow:"0 0 5px white"},appBar:{display:"flex",alignItems:"center",flexDirection:"row",margin:0,alignSelf:"stretch",justifyContent:"flex-start",flexWrap:"wrap"}},Xe=n(116),Je=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={open:!1},r.toggleWindow=r.toggleWindow.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"toggleWindow",value:function(){this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{open:!e.open})}))}},{key:"render",value:function(){return this.state.open?Object(l.jsxs)("div",{children:[Object(l.jsx)(Ke,{fileSystem:this.props.fileSystem,id:"bin",name:"Recycle Bin",root:"bin",closeWindow:this.toggleWindow}),Object(l.jsx)(he,{icon:Object(l.jsx)(Xe.a,{style:{fontSize:30,color:_.e.yellow}}),name:"Recycle Bin",width:100,height:110,onClick:this.toggleWindow,nameOnChange:!1,nameChangable:!1},"trash_bin")]}):Object(l.jsx)(he,{icon:Object(l.jsx)(Xe.a,{style:{fontSize:30,color:_.e.yellow}}),name:"Recycle Bin",width:100,height:110,onClick:this.toggleWindow,nameOnChange:!1,nameChangable:!1},"trash_bin")}}]),n}(d.a.Component),Ye=n(117),qe=function(e){var t=e.toggleAppExplorer;return Object(l.jsx)(he,{icon:Object(l.jsx)(Ye.a,{style:{fontSize:30,color:_.e.yellow}}),name:"Applications",width:100,height:110,onClick:t,nameOnChange:!1,nameChangable:!1},"app_viewer")},Ge=function(e){for(var t=e.radius,n=e.length,r=e.index,a=e.selectIndex,i=[],o=function(e){i.push(Object(l.jsx)(me,{style:{width:2*t,height:2*t,borderRadius:t,margin:t,backgroundColor:r===e?_.e.transparentBlack:_.e.transparentWhite},onClick:function(){return a(e)}},e))},s=0;s<n;s++)o(s);return Object(l.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",margin:20},children:i})},Ze=n(118),$e=n(119),Qe=n(120),et=n(121),tt=n(122),nt=n(103),rt=n(123),at={manuBar:{alignSelf:"stretch",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:50,backgroundColor:_.e.transparentBlack},component:{flex:1,alignSelf:"stretch",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",fontFamily:"orbitron",fontSize:15,overflow:"hidden"},optionBtn:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",alignSelf:"stretch",flex:1,borderRadius:0,fontSize:12,backgroundColor:_.e.optionColor,color:_.e.optionTextColor},full:{display:"flex",position:"absolute",flexDirection:"column",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",overflow:"auto"},alarmRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",alignSelf:"stretch",backgroundColor:_.e.optionColor,color:_.e.optionTextColor,border:"1px solid rgba(255,255,255,0.5)"},alarmText:{fontSize:25,margin:10},alarmBtn:{display:"flex",flexDirection:"row"}},it=(n(87),n(102)),ot=n(37),st=n.n(ot),ct=0,lt=1,ut=2,dt=function(e){var t=e.text,n=e.icon,r=e.onClick;return Object(l.jsxs)(ye,{style:at.optionBtn,onClick:r,children:[n,t]})},ht=function(e){var t=e.clockIndex,n=e.setClockIndex,r=e.clocks,a=e.time,i=e.refresh,o=Object(w.f)(a).hour+":"+Object(w.f)(a).minute+":"+Object(w.f)(a).second;return Object(u.useEffect)(i,[]),Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},at.full),{},{minHeight:300}),children:[r[t],Object(l.jsx)(Ge,{index:t,length:r.length,selectIndex:n,radius:5}),Object(l.jsx)("div",{style:{color:_.e.optionTextColor,padding:10,fontWeight:"bold"},children:o})]})},pt=function(e){var t=e.timer,n=e.startDate,r=e.timerVal,a=e.setStartDate,i=e.setTimerVal;return Object(l.jsxs)("div",{style:at.full,children:[Object(l.jsx)("div",{style:{color:_.e.optionTextColor,padding:10,fontWeight:"bold",fontSize:20,width:150},children:function(e){var t=Math.floor(e/36e5%24),n=Math.floor(e/1e3/60%60),r=Math.floor(e/1e3%60),a=Math.floor(e%1e3/10);return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)+":"+(a<10?"0"+a:a)}(r)}),Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(l.jsx)(ye,{style:{margin:5,backgroundColor:_.e.red},onClick:function(){if(null===n){var e=new Date;a(e),t.current||(t.current=setInterval((function(){var t=new Date-e+r;i(t)}),16))}else a(null),clearInterval(t.current),t.current=null},children:null===n?Object(l.jsx)(Ze.a,{}):Object(l.jsx)($e.a,{})}),Object(l.jsx)(ye,{style:{margin:5},onClick:function(){a(null),clearInterval(t.current),t.current=null,i(0)},children:Object(l.jsx)(Qe.a,{})})]})]})},ft=function(e){var t=e.systemData,n=e.updateSystemData,r=Object(u.useState)(null),a=Object(ue.a)(r,2),i=a[0],o=a[1],s=t?t.alarm:{alarmList:[]},c=(s?s.alarmList:[]).map((function(e,t){return Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},at.alarmRow),{},{opacity:e.disabled?.5:1}),children:[Object(l.jsx)("div",{style:at.alarmText,children:st()(e.time).format("HH:mm")}),Object(l.jsxs)("div",{style:at.alarmBtn,children:[Object(l.jsx)(ye,{style:{margin:5},onClick:function(){d(t)},children:e.disabled?Object(l.jsx)(et.a,{}):Object(l.jsx)(tt.a,{})}),Object(l.jsx)(ye,{style:{margin:5,backgroundColor:_.e.red},onClick:function(){h(t)},children:Object(l.jsx)(Xe.a,{})})]})]},t)})),d=function(e){var t=Object(le.a)(s.alarmList);t[e].disabled=!t[e].disabled,n({alarm:Object(f.a)(Object(f.a)({},s),{},{alarmList:t})})},h=function(e){var t=Object(le.a)(s.alarmList);t.splice(e,1),n({alarm:Object(f.a)(Object(f.a)({},s),{},{alarmList:t})})};return Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},at.full),{},{justifyContent:"flex-start"}),children:[c,Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},at.alarmRow),{},{justifyContent:"center"}),children:[Object(l.jsx)(it.a,{value:i,onChange:o,format:"HH:mm",size:"small"}),Object(l.jsx)(ye,{style:{margin:10,backgroundColor:_.e.green},onClick:function(){var e=Object(le.a)(s.alarmList);e.push({time:new Date(i),disabled:!1}),n({alarm:Object(f.a)(Object(f.a)({},s),{},{alarmList:e})})},children:Object(l.jsx)(We.a,{})})]})]})},bt=function(e){var t=e.setOpen,n=e.timer,r=e.timerVal,a=e.setTimerVal,i=e.startDate,o=e.setStartDate,s=e.systemData,c=e.updateSystemData,d=e.time,h=e.clockIndex,p=e.setClockIndex,f=e.clocks,b=e.refresh,j=Object(u.useState)(ct),O=Object(ue.a)(j,2),g=O[0],m=O[1],y=g===ct?Object(l.jsx)(ht,{systemData:s,updateSystemData:c,clockIndex:h,setClockIndex:p,clocks:f,time:d,refresh:b}):g===lt?Object(l.jsx)(pt,{timer:n,timerVal:r,setTimerVal:a,startDate:i,setStartDate:o}):Object(l.jsx)(ft,{systemData:s,updateSystemData:c});return Object(l.jsxs)(ze,{id:"clock",top:0,left:0,name:"Clock",onCancel:function(){return t(!1)},children:[Object(l.jsx)("div",{style:at.component,children:y}),Object(l.jsxs)("div",{style:at.manuBar,children:[Object(l.jsx)(dt,{text:"clock",onClick:function(){return m(ct)},icon:Object(l.jsx)(nt.a,{style:{fontSize:20,margin:5}})}),Object(l.jsx)(dt,{text:"timer",onClick:function(){return m(lt)},icon:Object(l.jsx)(rt.a,{style:{fontSize:20,margin:5}})}),Object(l.jsx)(dt,{text:"alarm",onClick:function(){return m(ut)},icon:Object(l.jsx)(et.a,{style:{fontSize:20,margin:5}})})]})]})},jt=n(43),Ot=function(e){var t=e.systemData,n=e.updateSystemData,r=Object(u.useState)(!1),a=Object(ue.a)(r,2),i=a[0],o=a[1],s=Object(u.useState)(new Date),c=Object(ue.a)(s,2),d=c[0],h=c[1],p=Object(u.useState)(null),f=Object(ue.a)(p,2),b=f[0],j=f[1],O=Object(u.useState)(0),g=Object(ue.a)(O,2),m=g[0],y=g[1],v=Object(u.useRef)(),C=(t?t.clock?t.clock:{index:1}:{index:0}).index,x=function(){for(var e=document.getElementsByClassName("react-clock__minute-hand__body"),t=document.getElementsByClassName("react-clock__hour-hand__body"),n=document.getElementsByClassName("react-clock__second-hand__body"),r=document.getElementsByClassName("react-clock__face"),a=0;a<e.length;a++)e[a].style.background=_[C].minuteHandColor;for(var i=0;i<t.length;i++)t[i].style.background=_[C].hourHandColor;for(var o=0;o<n.length;o++)n[o].style.background=_[C].secondHandColor;for(var s=0;s<r.length;s++)r[s].style.background=_[C].clockFaceColor,r[s].style.color=_[C].textColor,r[s].style.border="none"};Object(u.useEffect)(x,[C]);var w=[Object(l.jsx)(jt.a,{value:d,hourHandOppositeLength:1,minuteHandOppositeLength:1,secondHandOppositeLength:1,renderNumbers:!1,renderMinuteMarks:!1,renderHourMarks:!1}),Object(l.jsx)(jt.a,{value:d,renderNumbers:!0,hourHandOppositeLength:10,minuteHandOppositeLength:10,renderMinuteMarks:!1,hourMarksLength:3,hourMarksWidth:2}),Object(l.jsx)(jt.a,{value:d,hourHandLength:30,minuteHandLength:60,secondHandLength:80,hourHandOppositeLength:1,minuteHandOppositeLength:1,secondHandOppositeLength:1,renderNumbers:!0,renderMinuteMarks:!1,renderHourMarks:!0,hourMarksLength:0}),Object(l.jsx)(jt.a,{value:d,renderNumbers:!1,renderMinuteMarks:!0,renderHourMarks:!0,hourMarksWidth:3,minuteMarksWidth:2}),Object(l.jsx)(jt.a,{value:d,renderNumbers:!0,renderMinuteMarks:!0,renderHourMarks:!0,hourMarksLength:0,minuteMarksLength:0})],_=[{minuteHandColor:"black",hourHandColor:"black",clockFaceColor:"white",secondHandColor:"red",textColor:"white"},{minuteHandColor:"white",hourHandColor:"white",clockFaceColor:"red",secondHandColor:"yellow",textColor:"white"},{minuteHandColor:"red",hourHandColor:"red",clockFaceColor:"black",secondHandColor:"red",textColor:"red"},{minuteHandColor:"black",hourHandColor:"black",clockFaceColor:"linear-gradient(to right, #fc5c7d, #6a82fb)",secondHandColor:"white",textColor:"black"},{minuteHandColor:"black",hourHandColor:"black",clockFaceColor:"linear-gradient(to right, #40e0d0, #ff8c00, #ff0080)",secondHandColor:"white",textColor:"black"}];return Object(u.useEffect)((function(){var e=t?t.alarm:{alarmList:[]},n=e?e.alarmList:[],r=setInterval((function(){var e,t=new Date,r=Object(L.a)(n);try{for(r.s();!(e=r.n()).done;){var a=e.value,i=new Date(a.time);if(!a.disabled&&i.getHours()===t.getHours()&&i.getMinutes()===t.getMinutes())return void window.alert("Alarm")}}catch(o){r.e(o)}finally{r.f()}}),1e3);return function(){clearInterval(r)}}),[t]),Object(u.useEffect)((function(){var e=setInterval((function(){h(new Date)}),1e3);return function(){clearInterval(e)}}),[]),Object(l.jsxs)("div",{children:[i&&Object(l.jsx)(bt,{time:d,setOpen:o,startDate:b,setStartDate:j,timerVal:m,setTimerVal:y,timer:v,systemData:t,updateSystemData:n,clockIndex:C,setClockIndex:function(e){n({clock:{index:e}})},clocks:w,refresh:x}),Object(l.jsx)(he,{icon:Object(l.jsx)(jt.a,{value:d,size:50,hourHandWidth:2,minuteHandWidth:1,secondHandWidth:.7,secondHandLength:80,renderNumbers:!1,renderSecondHand:!0,renderMinuteMarks:!1,renderHourMarks:!1}),name:"Clock",width:100,height:110,onClick:function(){return o(!i)},nameOnChange:!1,nameChangable:!1},"clock")]})},gt={noteRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",alignSelf:"stretch",backgroundColor:_.e.optionColor,color:_.e.optionTextColor,border:"1px solid rgba(255,255,255,0.5)"},component:{flex:1,alignSelf:"stretch",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",fontFamily:"roboto",fontSize:15,overflow:"hidden"},full:{display:"flex",position:"absolute",flexDirection:"column",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",overflow:"auto"},title:{margin:5,fontWeight:"bold"},date:{fontSize:10,margin:5},titleCol:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},controlBtn:{display:"flex",flexDirection:"row"},noteContent:{flex:1,alignSelf:"stretch",margin:5,color:_.e.optionTextColor,outline:"none",overflow:"auto"},noteMenu:{height:25,width:"100%",backgroundColor:_.e.optionColor,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},menuButton:{width:25,height:25,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:"1px",borderStyle:"solid",borderColor:_.e.borderColor,backgroundColor:_.e.optionColor,color:_.e.optionTextColor}},mt=function(e){var t=e.onChange,n=e.value,r=e.style,a=e.placeholder;return Object(l.jsx)("input",{style:Object(f.a)({outline:"none",margin:"0",shadow:"none",border:"none",overflowX:"hidden",paddingLeft:5,fontSize:12},r),value:n,onChange:function(e){return t(e.target.value)},placeholder:a})},yt=n(62),vt=n(124),Ct=n(125),xt=function(e){var t=e.note,n=e.index,r=e.onCancel,a=e.saveNote,i=e.setNoteSize,o=e.setNotePos,s=Object(u.useState)(!0),c=Object(ue.a)(s,2),d=c[0],h=c[1],p=Object(u.useRef)();Object(u.useEffect)((function(){p.current&&(p.current.innerText=t.content)}),[]);return Object(l.jsxs)(ze,{id:"note-"+t.id,top:t.pos.y,left:t.pos.x,name:t.title+(d?" \u25cf":" \u25cb"),onCancel:r,minWidth:120,minHeight:50,height:t.size.h,width:t.size.w,onFinishResize:function(e,t){i({w:e,h:t},n)},onFinishDrag:function(e,t){o({x:e,y:t},n)},children:[Object(l.jsx)("div",{style:gt.noteMenu,children:Object(l.jsx)(me,{style:gt.menuButton,onClick:function(){h(!0),a(p.current.innerText,n)},children:Object(l.jsx)(vt.a,{})})}),Object(l.jsx)("div",{ref:function(e){return p.current=e},style:gt.noteContent,contentEditable:!0,onInput:function(){return h(!1)}})]})},wt=function(e){var t=e.note,n=e.index,r=e.toggleNoteActive,a=e.toggleNoteOpen,i=e.deleteNote,o=Object(w.f)(new Date(t.date));return Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},gt.noteRow),{},{opacity:t.active?1:.5}),children:[Object(l.jsxs)(me,{style:gt.titleCol,onClick:function(){return a(n)},children:[Object(l.jsx)("div",{style:gt.title,children:t.title}),Object(l.jsx)("div",{style:gt.date,children:o.year+"-"+o.month+"-"+o.day+" "+o.hour+":"+o.minute})]}),Object(l.jsxs)("div",{style:gt.controlBtn,children:[Object(l.jsx)(ye,{style:{margin:5},onClick:function(){r(n)},children:Object(l.jsx)(Ct.a,{style:{color:t.active?_.e.transparentBlack:_.e.green}})}),Object(l.jsx)(ye,{style:{margin:5,backgroundColor:_.e.red},onClick:function(){i(n)},children:Object(l.jsx)(Xe.a,{})})]})]})},_t=function(e){var t=e.setOpen,n=e.systemData,r=e.updateSystemData,a=n?n.notes:{notes:[]},i=a?a.notes:[],o=Object(u.useState)(),s=Object(ue.a)(o,2),c=s[0],d=s[1],h=Object(u.useState)(""),p=Object(ue.a)(h,2),b=p[0],j=p[1],O=Object(u.useRef)(i),g=function(e){r({notes:{notes:JSON.parse(JSON.stringify(e))}}),O.current=e},m=function(e){var t=Object(le.a)(O.current);t[e].active=!t[e].active,g(t)},y=function(e){var t=Object(le.a)(O.current);t[e].open=!t[e].open,g(t)},v=function(e){var t=Object(le.a)(O.current);t.splice(e,1),g(t)},C=function(e,t){var n=Object(le.a)(O.current);n[t].content=e,g(n)},x=function(e,t){var n=Object(le.a)(O.current);n[t].size=e,g(n)},w=function(e,t){var n=Object(le.a)(O.current);n[t].pos=e,console.log(n),g(n)},k=[],S=[];return i.map((function(e,t){S.push(Object(l.jsx)(wt,{index:t,note:e,toggleNoteActive:m,toggleNoteOpen:y,deleteNote:v},e.title)),e.open&&k.push(Object(l.jsx)(xt,{index:t,saveNote:C,setNoteSize:x,setNotePos:w,note:e,onCancel:function(){return y(t)}},e.title))})),Object(l.jsxs)("div",{children:[Object(l.jsx)(ze,{id:"notes",top:0,left:0,name:"Notes",onCancel:function(){return t(!1)},children:Object(l.jsx)("div",{style:gt.component,children:Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},gt.full),{},{justifyContent:"flex-start"}),children:[S,Object(l.jsxs)("div",{style:gt.noteRow,children:[Object(l.jsx)(mt,{value:b,onChange:j,placeholder:"title",style:{color:_.e.optionColor,border:"1px solid white",borderRadius:2,margin:5,fontSize:14}}),Object(l.jsx)("div",{style:{margin:5},children:Object(l.jsx)(yt.a,{value:c,onOk:d,onChange:d,showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",size:"small",placeholder:"date"})}),Object(l.jsx)(ye,{style:{margin:10,backgroundColor:_.e.green},onClick:function(){var e=JSON.parse(JSON.stringify(i));e.push({title:b,content:"",active:!0,open:!1,pos:{x:0,y:0},size:{w:200,h:200},date:new Date(c)}),g(e)},children:Object(l.jsx)(We.a,{})})]})]})})}),k]})},kt=n(126),St=function(e){var t=e.systemData,n=e.updateSystemData,r=Object(u.useState)(!1),a=Object(ue.a)(r,2),i=a[0],o=a[1];return Object(l.jsxs)("div",{children:[i&&Object(l.jsx)(_t,{setOpen:o,systemData:t,updateSystemData:n}),Object(l.jsx)(he,{icon:Object(l.jsx)(kt.a,{style:{fontSize:30,color:_.e.yellow}}),name:"Notes",width:100,height:110,onClick:function(){return o(!i)},nameOnChange:!1,nameChangable:!1},"notes")]})},Dt=function(e){var t=e.onCancel,n=e.fileSystem.getDirectorySize("root");return Object(l.jsx)(ze,{top:0,left:0,id:"setting",name:"Setting",onCancel:t,children:n})},Et=n(127),It=function(e){var t=e.fileSystem,n=(e.systemData,e.updateSystemData,Object(u.useState)(!1)),r=Object(ue.a)(n,2),a=r[0],i=r[1];return Object(l.jsxs)("div",{children:[a&&Object(l.jsx)(Dt,{fileSystem:t,onCancel:function(){return i(!a)}}),Object(l.jsx)(he,{icon:Object(l.jsx)(Et.a,{style:{fontSize:30,color:_.e.yellow}}),name:"Setting",width:100,height:110,onClick:function(){return i(!a)},nameOnChange:!1,nameChangable:!1},"setting")]})},Ft=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){return Object(b.a)(this,n),t.call(this,e)}return Object(j.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},Ve.section),{},{width:100*Math.floor(.9*this.props.dims.width/100)}),children:[Object(l.jsx)("div",{style:Ve.title,children:"Utilities"}),Object(l.jsxs)("div",{style:Ve.appBar,children:[Object(l.jsx)(Je,{fileSystem:this.props.fileSystem}),Object(l.jsx)(qe,{toggleAppExplorer:this.props.appFuncs.toggleAppExplorer}),Object(l.jsx)(St,{systemData:this.props.systemData,updateSystemData:this.props.updateSystemData}),Object(l.jsx)(It,{fileSystem:this.props.fileSystem,systemData:this.props.systemData,updateSystemData:this.props.updateSystemData}),Object(l.jsx)(Ot,{systemData:this.props.systemData,updateSystemData:this.props.updateSystemData})]})]})}}]),n}(d.a.Component),Mt=n(50),Nt={tabRow:{display:"flex",alignSelf:"stretch",flexDirection:"row",flexShrink:0,justifyContent:"flex-start",alignItems:"stretch",overflowX:"auto",height:20,fontFamily:"roboto",fontSize:13,backgroundColor:_.e.optionColor,color:_.e.optionTextColor},tabCell:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:_.e.optionColor,color:_.e.optionTextColor,borderWidth:"1px",borderStyle:"solid",borderColor:_.e.borderColor,width:100,padding:5,overflow:"hidden",whiteSpace:"nowrap"}},Rt={frame:{justifyContent:"center",alignItems:"stretch",overflow:"hidden",borderWidth:2,borderColor:"white",borderStyle:"solid"},menuBar:{display:"flex",height:30,flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",fontFamily:"roboto",fontSize:12},dropDown:{display:"flex",flexDirection:"column",alignItems:"stretch",width:100,height:30,borderWidth:"1px",borderStyle:"solid",borderColor:_.e.borderColor},cursorInfo:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center",width:100,height:30,padding:10,borderWidth:"1px",borderStyle:"solid",borderColor:_.e.borderColor,background:_.e.optionColor,color:_.e.optionTextColor},title:{display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",padding:10,borderWidth:"1px",borderStyle:"solid",fontSize:14,borderColor:_.e.borderColor,background:_.e.titleColor,color:_.e.titleTextColor},menuButton:{width:30,height:30,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:"1px",borderStyle:"solid",borderColor:_.e.borderColor,backgroundColor:_.e.optionColor,color:_.e.optionTextColor},inputBox:{outline:"none",margin:"0",shadow:"none",overflowX:"hidden",paddingLeft:5,fontSize:12,fontFamily:"roboto",borderWidth:"1px",borderStyle:"solid",borderColor:_.e.borderColor,backgroundColor:_.e.optionColor,color:_.e.optionTextColor}},Wt=n(75),Lt=n(76),Pt=n.n(Lt);n(92),n(93);n(66),n(67),n(94),n(95);var Tt=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).onCursorActivity=function(e){var t=e.getCursor();r.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{line:t.line,col:t.ch})}))},r.dropDownSelect=function(e){r.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{mode:e.value})}))},r.changeCmd=function(e){r.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{cmd:e.target.value})}))},r.MODES={JS:{value:"javascript",label:"JavaScript"},JSX:{value:"jsx",label:"JSX"},HTML:{value:"xml",label:"HTML"},CSS:{value:"css",label:"CSS"},NULL:{value:"null",label:"Plain"}},r.state={line:0,col:0,mode:r.MODES.HTML.value,cmd:""},r.onCursorActivity=r.onCursorActivity.bind(Object(O.a)(r)),r.dropDownSelect=r.dropDownSelect.bind(Object(O.a)(r)),r.changeCmd=r.changeCmd.bind(Object(O.a)(r)),r.executeCmd=r.executeCmd.bind(Object(O.a)(r)),r.highlight=r.highlight.bind(Object(O.a)(r)),r.unhighlight=r.unhighlight.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementsByClassName(this.props.id+"_codebox")[0];t.style.flex=1,t.children[0].style.height=String(this.props.height-30)+"px",t.addEventListener("keydown",(function(t){if(t.ctrlKey)return 83===t.which&&(t.preventDefault(),e.props.saveFile()),!1}))}},{key:"executeCmd",value:function(e){"Enter"===e.key&&console.log(this.state.cmd)}},{key:"highlight",value:function(e){e.target.style.opacity=.8}},{key:"unhighlight",value:function(e){e.target.style.opacity=1}},{key:"render",value:function(){var e=this,t=Object.keys(this.MODES).map((function(t){return e.MODES[t]}));return Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},y.column),{},{width:this.props.width,height:this.props.height},Rt.frame),children:[this.props.width>300&&Object(l.jsxs)("div",{style:Rt.menuBar,children:[Object(l.jsx)("div",{style:Rt.cursorInfo,children:Object(l.jsx)("div",{children:"Ln "+this.state.line+", Col "+this.state.col})}),Object(l.jsx)("div",{style:Rt.title,children:this.props.title+(this.props.saved?" \u25cf":" \u25cb")}),Object(l.jsx)("div",{style:Rt.dropDown,children:Object(l.jsx)(Pt.a,{options:t,onChange:this.dropDownSelect,value:this.state.mode,placeholder:"Language"})})]}),Object(l.jsx)(Wt.Controlled,{className:this.props.id+"_codebox",value:this.props.value,options:{mode:this.state.mode,theme:"material",lineNumbers:!0,autoRefresh:!0},editorDidMount:function(t){e.instance=t,setTimeout((function(){return e.instance.refresh()}),0)},onBeforeChange:this.props.onBeforeChange,onChange:this.props.onChange,onCursorActivity:this.onCursorActivity}),Object(l.jsxs)("div",{style:Rt.menuBar,children:[Object(l.jsx)("input",{style:Object(f.a)(Object(f.a)({},Rt.inputBox),{},{width:this.props.width-120}),value:this.state.cmd,onChange:this.changeCmd,onKeyDown:this.executeCmd,placeholder:"Enter Command"}),Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Rt.menuButton),{},{width:70}),onClick:function(){return e.props.changeDisplayMode(tn.PREVIEW)},onMouseOver:this.highlight,onMouseOut:this.unhighlight,children:"Preview"}),Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Rt.menuButton),{},{width:70}),onClick:function(){return e.props.changeDisplayMode(tn.CONSOLE)},onMouseOver:this.highlight,onMouseOut:this.unhighlight,children:"Console"})]})]})}}]),n}(d.a.Component),At={container:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",borderWidth:"2px",borderStyle:"solid",borderColor:"white"},menuBar:{display:"flex",height:30,flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",fontFamily:"roboto",fontSize:12},title:{flex:1,width:60,display:"flex",padding:5,justifyContent:"flex-start",alignItems:"center",borderWidth:"1px",borderStyle:"solid",overflow:"hidden",fontSize:14,borderColor:_.e.borderColor,backgroundColor:_.e.titleColor,color:_.e.titleTextColor},menuButton:{width:30,height:30,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:"1px",borderStyle:"solid",borderColor:_.e.borderColor,backgroundColor:_.e.optionColor,color:_.e.optionTextColor},inputBox:{outline:"none",margin:"0",shadow:"none",overflowX:"hidden",paddingLeft:5,fontSize:12,fontFamily:"roboto",borderWidth:"1px",borderStyle:"solid",borderColor:_.e.borderColor,backgroundColor:_.e.optionColor,color:_.e.optionTextColor},entry:{padding:5,borderWidth:"1px",borderStyle:"solid",borderColor:_.e.borderColor,justifyContent:"flex-start",alignItems:"flex-start"},frame:{flex:1,backgroundColor:_.e.contentColor,color:_.e.contentTextColor,fontFamily:"roboto",fontSize:12}},Ut=n(128),Bt=n(129),Ht=n(130),zt=n(131),Kt=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={currentDirectory:null,currentContent:{},inputValue:"",popUpOn:!1,popUpPosition:{},popUpEntries:[]},r.changeInputValue=r.changeInputValue.bind(Object(O.a)(r)),r.createDirectory=r.createDirectory.bind(Object(O.a)(r)),r.createFile=r.createFile.bind(Object(O.a)(r)),r.highlight=r.highlight.bind(Object(O.a)(r)),r.unhighlight=r.unhighlight.bind(Object(O.a)(r)),r.changeCurrentDirectory=r.changeCurrentDirectory.bind(Object(O.a)(r)),r.setNameOnChange=r.setNameOnChange.bind(Object(O.a)(r)),r.saveName=r.saveName.bind(Object(O.a)(r)),r.setPopUp=r.setPopUp.bind(Object(O.a)(r)),r.closePopUp=r.closePopUp.bind(Object(O.a)(r)),r.deleteNode=r.deleteNode.bind(Object(O.a)(r)),r.reloadCurrentContent=r.reloadCurrentContent.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.fileSystem.addSaveCallBack(this.reloadCurrentContent),this.props.currentDirectoryHash&&this.changeCurrentDirectory(this.props.currentDirectoryHash),"bin"===this.props.currentDirectoryHash&&this.props.fileSystem.setOnRemove((function(){return e.changeCurrentDirectory(e.props.currentDirectoryHash)}))}},{key:"reloadCurrentContent",value:function(){var e=this.state.currentDirectory.getChildren();for(var t in e=Object(f.a)({},e))e[t]={metadata:e[t],nameOnChange:!1};this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{popUpOn:!1,currentContent:e})}))}},{key:"changeCurrentDirectory",value:function(e){var t=this.props.fileSystem.getDirectory(e),n=t.getChildren();for(var r in n=Object(f.a)({},n))n[r]={metadata:n[r],nameOnChange:!1};this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentDirectory:t,currentContent:n})}))}},{key:"highlight",value:function(e){e.target.style.opacity=.8}},{key:"unhighlight",value:function(e){e.target.style.opacity=1}},{key:"changeInputValue",value:function(e){this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{inputValue:e.target.value})}))}},{key:"createFile",value:function(){var e=this.props.fileSystem,t=this.state.currentDirectory.getHash();null!==(""!==this.state.inputValue?e.createNewFile(t,this.state.inputValue,""):e.createNewFile(t,"New File",""))?this.reloadCurrentContent():window.alert("File Name already in use")}},{key:"createDirectory",value:function(){var e=this.props.fileSystem,t=this.state.currentDirectory.getHash();null!==(""!==this.state.inputValue?e.createNewDirectory(t,this.state.inputValue):e.createNewDirectory(t,"New Folder"))?this.reloadCurrentContent():window.alert("File Name already in use")}},{key:"deleteNode",value:function(e){this.state.currentDirectory.isBin()?this.props.fileSystem.deepRemoveNode(e):this.props.fileSystem.removeNode(this.state.currentDirectory.getHash(),e),this.reloadCurrentContent()}},{key:"setNameOnChange",value:function(e,t){var n=this.state.currentContent;n[e].nameOnChange=t,this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentContent:n})}))}},{key:"saveName",value:function(e,t,n){if(""!==t)if(t.length>=25)alert("the file name exceeded the length limit!");else{n===q.FILE?this.props.fileSystem.changeFileName(e,t):this.props.fileSystem.changeDirectoryName(e,t);var r=this.state.currentContent;r[e].metadata.name=t,r[e].nameOnChange=!1,this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentContent:r})}))}else alert("the file name cannot be empty!")}},{key:"closePopUp",value:function(e){e.preventDefault(),"click"===e.type?window.removeEventListener("click",this.closePopUp):window.removeEventListener("contextmenu",this.closePopUp),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{popUpOn:!1})}))}},{key:"setPopUp",value:function(e,t,n){this.setState((function(r){return Object(f.a)(Object(f.a)({},r),{},{popUpOn:!0,popUpPosition:{x:e,y:t},popUpEntries:n})}))}},{key:"handleContextMenu",value:function(e,t){var n=this;window.addEventListener("click",this.closePopUp),e.preventDefault(),this.setPopUp(e.clientX,e.clientY,[{content:"Delete",func:function(){return n.deleteNode(t.hash)}},{content:"Rename",func:function(){n.setNameOnChange(t.hash,!0)}}])}},{key:"render",value:function(){var e=this,t=[],n=this.state.currentDirectory,r=this.state.currentContent;if(n&&r!=={}){var a=function(n){var a=r[n].metadata;a.type===q.DIR?t.push({content:Object(l.jsxs)("div",{children:[Object(l.jsx)(Ut.a,{})," ",a.name]}),value:a.name,valueOnChange:r[n].nameOnChange,func:function(){e.changeCurrentDirectory(a.hash)},contextFunc:function(t){e.handleContextMenu(t,a)},enterFunc:function(t){e.saveName(a.hash,t,a.type)},cancelFunc:function(){e.setNameOnChange(n,!1)}}):t.push({content:Object(l.jsxs)("div",{children:[Object(l.jsx)(Bt.a,{})," ",a.name]}),value:a.name,valueOnChange:r[n].nameOnChange,func:function(){e.props.openFile(e.props.fileSystem.getFile(a.hash))},contextFunc:function(t){e.handleContextMenu(t,a)},enterFunc:function(t){e.saveName(a.hash,t,a.type)},cancelFunc:function(){e.setNameOnChange(n,!1)}})};for(var i in r)a(i)}return Object(l.jsxs)("div",{style:Object(f.a)({height:this.props.height,width:this.props.width},At.container),children:[this.state.popUpOn&&Object(l.jsx)(Oe,{top:this.state.popUpPosition.y,left:this.state.popUpPosition.x,entries:this.state.popUpEntries}),Object(l.jsxs)("div",{style:At.menuBar,children:[Object(l.jsx)("div",{style:At.title,children:n?n.getName():""}),Object(l.jsx)("div",{style:At.menuButton,onClick:function(){n.getParent()&&e.changeCurrentDirectory(n.getParent())},onMouseOver:this.highlight,onMouseOut:this.unhighlight,children:Object(l.jsx)(Qe.a,{})})]}),Object(l.jsx)(be,{entries:t,rowHeight:this.props.rowHeight,containerStyle:At.frame,entryStyle:At.entry}),Object(l.jsxs)("div",{style:At.menuBar,children:[Object(l.jsx)("input",{style:Object(f.a)(Object(f.a)({},At.inputBox),{},{width:this.props.width-60}),value:this.state.inputValue,onChange:this.changeInputValue,placeholder:"Enter Name"}),Object(l.jsx)("div",{style:At.menuButton,onClick:this.createFile,onMouseOver:this.highlight,onMouseOut:this.unhighlight,children:Object(l.jsx)(Ht.a,{})}),Object(l.jsx)("div",{style:At.menuButton,onClick:this.createDirectory,onMouseOver:this.highlight,onMouseOut:this.unhighlight,children:Object(l.jsx)(zt.a,{})})]})]})}}]),n}(d.a.Component),Vt={frame:{backgroundColor:_.e.transparentWhite,border:"2px solid white"}},Xt=function(e){var t=e.id,n=e.width,r=e.height,a=e.data;return e.blur?Object(l.jsx)("div",{id:t,style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:_.e.transparentBlack,width:n,height:r,border:"2px dotted white"},children:Object(l.jsx)("div",{style:{fontSize:25,fontFamily:"roboto",color:_.e.transparentWhite},children:"Resizing..."})}):function(e){var t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol||"file:"===t.protocol||"data:"===t.protocol}(a)||function(e){if(""===e||""===e.trim())return!1;try{return btoa(atob(e))===e}catch(t){return!1}}(a)?Object(l.jsx)("iframe",{id:t,title:"webview",style:Vt.frame,width:n,height:r,src:a,"data-cookieconsent":"marketing"}):/<\/?[a-z][\s\S]*>/i.test(a)?Object(l.jsx)("iframe",{id:t,title:"webview",style:Vt.frame,width:n,height:r,srcDoc:a}):Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Vt.frame),{},{width:n,height:r}),children:a})},Jt=function(e){var t=e.leftWidth,n=e.resizeable,r=e.onResize,a=e.onFinishResize,i=void 0===a?function(){}:a,o=Object(u.useRef)(0),s=Object(u.useRef)(t),c=Object(u.useRef)();Object(u.useEffect)((function(){n?c.current.addEventListener("mousedown",p):(c.current.removeEventListener("mousedown",p),window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",h))}),[n]);var d=Object(u.useCallback)((function(e){(e=e||window.event).preventDefault();var t=e.clientX-o.current;r(s.current+t)}),[]),h=Object(u.useCallback)((function(e){console.log("close"),e=e||window.event,s.current=s.current+e.clientX-o.current,window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",h);var t,n=document.getElementsByTagName("iframe"),r=Object(L.a)(n);try{for(r.s();!(t=r.n()).done;){t.value.style.pointerEvents="auto"}}catch(a){r.e(a)}finally{r.f()}i()}),[]),p=Object(u.useCallback)((function(e){console.log(t),e=e||window.event,o.current=e.clientX,window.addEventListener("mousemove",d),window.addEventListener("mouseup",h);var n,r=document.getElementsByTagName("iframe"),a=Object(L.a)(r);try{for(a.s();!(n=a.n()).done;){n.value.style.pointerEvents="none"}}catch(i){a.e(i)}finally{a.f()}}),[]);return Object(l.jsx)("div",{ref:c,style:{width:3,height:"100%",cursor:"col-resize",backgroundColor:_.e.transparentWhite}})},Yt={overflowY:"auto",justifyContent:"stretch",alignItems:"flex-start"},qt={display:"flex",flex:1,flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",padding:"0px",border:"2px solid white"},Gt={outline:"none",border:"none",width:"100%",margin:"0",shadow:"none"},Zt={display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",border:"2px solid white"},$t={display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:5,background:"black",color:"white"},Qt=function(e){var t=e.index,n=e.id,r=e.value,a=e.style,i=e.onKeyDown,o=e.onChange;return e.modifiable?Object(l.jsx)("div",{contentEditable:!0,className:n+"_line","data-index":t,type:"text",spellCheck:!1,style:Object(f.a)(Object(f.a)({},Gt),a),onKeyDown:i,onInput:o}):Object(l.jsx)("div",{className:n+"_line","data-index":t,type:"text",spellCheck:!1,style:Object(f.a)(Object(f.a)({},Gt),a),children:r})},en=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={lineNumber:0,lines:[{value:""}]},r.id=Object(w.a)(),r.lineOnChange=r.lineOnChange.bind(Object(O.a)(r)),r.lineOnKeyDown=r.lineOnKeyDown.bind(Object(O.a)(r)),r.setFocus=r.setFocus.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;Array.isArray(this.props.lines)&&this.props.lines.length>0&&this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{lines:e.props.lines})}))}},{key:"lineOnChange",value:function(e){var t=e.target.innerText,n=this.state.lines,r=Number(e.target.dataset.index);n[r].value=t,this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{lines:n,lineNumber:n.length-1})}))}},{key:"setFocus",value:function(e){document.getElementsByClassName(this.id+"_line")[e].focus()}},{key:"lineOnKeyDown",value:function(e){var t=this,n=e.key,r=e.target,a=this.state.lines,i=r.innerText;if("Enter"===n){e.preventDefault();var o=this.props.evalFunc(i);o?(a.push({value:"Out["+String((a.length+1)/2)+"]: "+o}),a.push({value:""})):a.push({value:""}),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{lines:a,lineNumber:a.length-1})}),(function(){t.setFocus(a.length-1)}))}}},{key:"render",value:function(){var e=this,t=this.state.lines,n=t.map((function(t,n){return n===e.state.lineNumber?Object(l.jsx)(Qt,{index:n,id:e.id,value:t.value,modifiable:!0,style:{background:"black",height:20,fontSize:15,fontFamily:"roboto",color:"lightgreen"},onKeyDown:e.lineOnKeyDown,onChange:e.lineOnChange},n):Object(l.jsx)(Qt,{index:n,id:e.id,value:t.value,modifiable:!1,style:{background:"black",height:20,fontSize:15,fontFamily:"roboto",color:"lightgreen"},onKeyDown:e.lineOnKeyDown,onChange:e.lineOnChange},n)})),r=t.map((function(e,t){return Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},$t),{},{height:20}),children:String(t+1)},String(t))}));return Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)(Object(f.a)({},y.row),Yt),{},{height:this.props.height,width:this.props.width,background:"grey"}),children:[Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Zt),{},{width:40,background:"grey"}),children:r}),Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},qt),{},{background:"grey"}),children:n})]})}}]),n}(d.a.Component),tn={NONE:0,PREVIEW:1,CONSOLE:2},nn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).onBeforeChange=function(e,t,n,a){r.setState((function(e){var t=r.state.currentFiles;return t[a].value=n,t[a].saved=!1,Object(f.a)(Object(f.a)({},e),{},{currentFiles:t})}))},r.onChange=function(){},r.setFileIndex=function(e){r.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{currentIndex:e})}))},r.changeDisplayMode=function(e){r.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{displayMode:e})}))},r.setDimensions=function(e,t){r.setState((function(n){return Object(f.a)(Object(f.a)({},n),{},{dimensions:Object(f.a)(Object(f.a)({},n.dimensions),{},{width:e,height:t})})}))},r.resizeCodeEditor=function(e){r.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{dimensions:Object(f.a)(Object(f.a)({},t.dimensions),{},{codeEditorWidth:e}),resizing:!0})}))},r.state={currentFiles:[],currentIndex:0,displayMode:tn.NONE,dimensions:{width:650,height:430,minWidth:650,minHeight:430,codeEditorWidth:400},resizing:!1,tempAppData:{}},r.openFile=r.openFile.bind(Object(O.a)(r)),r.saveFile=r.saveFile.bind(Object(O.a)(r)),r.onBeforeChange=r.onBeforeChange.bind(Object(O.a)(r)),r.onChange=r.onChange.bind(Object(O.a)(r)),r.setFileIndex=r.setFileIndex.bind(Object(O.a)(r)),r.changeDisplayMode=r.changeDisplayMode.bind(Object(O.a)(r)),r.setDimensions=r.setDimensions.bind(Object(O.a)(r)),r.highlight=r.highlight.bind(Object(O.a)(r)),r.unhighlight=r.unhighlight.bind(Object(O.a)(r)),r.logMessage=r.logMessage.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.logMessage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.logMessage)}},{key:"logMessage",value:function(e){var t=e.data,n="ide",r=document.getElementById("ide_appView");if("exec"===t.type)console.log("EXEC",n,t.command);else if("post"===t.type)console.log("POST",n,t.key,t.value),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{appData:Object(f.a)(Object(f.a)({},e.appData),{},Object(Mt.a)({},t.key,t.value))})}));else if("get"===t.type){var a=this.state.appData[t.key];r.contentWindow.postMessage(Object(f.a)(Object(f.a)({},t),{},{response:a})),console.log(a)}}},{key:"openFile",value:function(e){var t,n=Object(L.a)(this.state.currentFiles);try{for(n.s();!(t=n.n()).done;){if(t.value.file.getHash()===e.getHash())return}}catch(r){n.e(r)}finally{n.f()}this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{currentFiles:[].concat(Object(le.a)(t.currentFiles),[{file:e,value:e.getData(),saved:!0}])})}))}},{key:"saveFile",value:function(e){var t=this;this.props.fileSystem.saveFile(this.state.currentFiles[e].file.getHash(),this.state.currentFiles[e].value),this.setState((function(n){var r=t.state.currentFiles;return r[e].saved=!0,Object(f.a)(Object(f.a)({},n),{},{currentFiles:r})}))}},{key:"closeFile",value:function(e){var t=this.state.currentFiles;t[e].saved?(t.splice(e,1),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentFiles:t})}))):(window.confirm("Do you want to save your changes?")&&this.props.fileSystem.saveFile(this.state.currentFiles[e].file.getHash(),this.state.currentFiles[e].value),this.setState((function(n){return t.splice(e,1),Object(f.a)(Object(f.a)({},n),{},{currentFiles:t})})))}},{key:"highlight",value:function(e){e.target.style.opacity=.8}},{key:"unhighlight",value:function(e){e.target.style.opacity=1}},{key:"render",value:function(){var e=this,t=this.state.currentIndex,n=this.state.currentFiles,r=this.state.displayMode,a=Object(l.jsx)("div",{style:Nt.tabRow,children:n.map((function(t,n){return Object(l.jsxs)("div",{style:Nt.tabCell,onClick:function(){return e.setFileIndex(n)},onMouseOver:e.highlight,onMouseOut:e.unhighlight,children:[Object(w.h)(t.file.getName(),10,"...")+(t.saved?" \u25cf":" \u25cb"),Object(l.jsx)("div",{onClick:function(){return e.closeFile(n)},children:Object(l.jsx)(Ae.a,{})})]},n)}))});return Object(l.jsxs)(ze,{id:"code_editor_window",name:"JS Code",top:0,left:0,onCancel:this.props.closeWindow,onResize:this.setDimensions,children:[a,Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},y.row),{},{flex:1}),children:[Object(l.jsx)(Kt,{fileSystem:this.props.fileSystem,currentDirectoryHash:this.props.currentHash,width:250,height:"100%",openFile:this.openFile}),n[t]&&Object(l.jsx)(Tt,{value:n[t].value,width:this.state.dimensions.codeEditorWidth,height:"100%",title:n[t].file.getName(),id:n[t].file.getHash(),saved:n[t].saved,onBeforeChange:function(n,r,a){return e.onBeforeChange(n,r,a,t)},onChange:function(n,r,a){return e.onChange(n,r,a,t)},saveFile:function(){return e.saveFile(t)},changeDisplayMode:this.changeDisplayMode}),n[t]&&Object(l.jsx)(Jt,{resizeable:!0,leftWidth:this.state.dimensions.codeEditorWidth,onResize:this.resizeCodeEditor,onFinishResize:this.finishResize}),r===tn.PREVIEW?n[t]&&Object(l.jsx)(Xt,{id:"ide_appView",width:Math.max(this.state.dimensions.width-250-3-this.state.dimensions.codeEditorWidth,300),height:"100%",data:n[t].value}):r===tn.CONSOLE?n[t]&&Object(l.jsx)(en,{width:Math.max(this.state.dimensions.width-250-3-this.state.dimensions.codeEditorWidth,300),height:"100%",evalFunc:w.e}):Object(l.jsx)(l.Fragment,{})]})]})}}]),n}(d.a.Component),rn={frame:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"stretch",padding:10},fileSelector:{position:"relative",borderRadius:"50%",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center"},previewImage:{position:"absolute",width:"100%",height:"100%",borderRadius:"50%",zIndex:5,backgroundColor:_.e.optionColor,pointerEvents:"none",border:"1px solid gray"}},an=function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))},on=function(e){var t=e.frameStyle,n=e.imageUrl,r=e.setImageUrl,a=e.previewWidth,i=void 0===a?50:a,o=e.previewHeight,s=void 0===o?50:o,c=e.editable,u=void 0===c||c;return Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},rn.frame),t),children:Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},rn.fileSelector),{},{width:i,height:s}),children:[n?Object(l.jsx)("img",{alt:"no preview",src:n,style:rn.previewImage}):Object(l.jsx)("div",{style:rn.previewImage}),u&&Object(l.jsx)("input",{style:{width:"100%",height:"100%",position:"absolute"},onChange:function(){var e=Object(x.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files.length>0)){e.next=6;break}return e.t0=r,e.next=4,an(t.target.files[0]);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),type:"file",id:"img",name:"img",accept:".jpg, .png, .svg"})]})})},sn={frame:{flex:1,display:"flex",alignSelf:"stretch",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",fontFamily:"roboto",fontSize:15,color:_.e.transparentWhite,backgroundColor:_.e.transparentBlack},fileSelector:{display:"hidden"},info:{display:"flex",alignSelf:"stretch",alignItems:"center",justifyContent:"center",fontSize:12,padding:3},label:{display:"flex",alignSelf:"stretch",justifyContent:"center",fontSize:16,fontWeight:"bold",padding:20},input:{fontSize:12,width:80,height:16,borderRadius:5,fontFamily:"roboto",textShadow:"0 0 5px white",padding:2,outline:"none",border:"none",backgroundColor:_.e.optionColor,color:_.e.transparentWhite,marginLeft:5},button:{margin:10,padding:10,borderRadius:10,justifyContent:"center",alignItems:"center",backgroundColor:_.e.transparentBlack,alignSelf:"center"}},cn=function(e){var t=e.userId,n=e.name,r=e.fileSystem,a=e.hash,i=e.handleInstallApp,o=e.closeInstaller,s=r.getFile(a),c=s.getSize(),d=s.getName(),h=Object(u.useState)(),p=Object(ue.a)(h,2),f=p[0],b=p[1],j=Object(u.useState)(""),O=Object(ue.a)(j,2),g=O[0],m=O[1],y=Object(u.useState)(""),v=Object(ue.a)(y,2),w=v[0],_=v[1],k=Object(u.useState)(!1),S=Object(ue.a)(k,2),D=S[0],E=S[1];return Object(l.jsx)(ze,{id:a,name:n,top:0,left:0,onCancel:o,children:Object(l.jsxs)("div",{style:sn.frame,children:[Object(l.jsx)("div",{style:sn.label,children:"Source File Information"}),Object(l.jsxs)("div",{style:sn.info,children:["File Name: ",d]}),Object(l.jsxs)("div",{style:sn.info,children:["File Size: ",Math.round(c/1024*100)/100,"KB"]}),Object(l.jsx)("div",{style:sn.label,children:"App Information"}),Object(l.jsxs)("div",{style:sn.info,children:["App Name:"," ",Object(l.jsx)("input",{type:"text",value:g,onChange:function(e){return m(e.target.value)},style:sn.input})]}),D&&Object(l.jsxs)("div",{style:sn.info,children:["Author Nickname:"," ",Object(l.jsx)("input",{type:"text",value:w,onChange:function(e){return _(e.target.value)},style:sn.input})]}),Object(l.jsxs)("div",{style:sn.info,children:["App Icon:",Object(l.jsx)(on,{imageUrl:f,setImageUrl:b})]}),Object(l.jsxs)("div",{style:sn.info,children:[Object(l.jsx)("input",{type:"checkbox",id:"share",name:"share",onChange:function(e){E(e.target.checked)}}),Object(l.jsx)("label",{htmlFor:"share",children:"Share to App Store"})]}),Object(l.jsx)("div",{style:sn.button,onMouseOver:function(e){e.target.style.opacity=.5},onMouseOut:function(e){e.target.style.opacity=1},onClick:Object(x.a)(C.a.mark((function e(){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({userId:t,hash:a,shareApp:D,appName:g,authorName:w,fileSize:c,iconUrl:f});case 2:(n=e.sent).error?alert(n.errMsg):o();case 4:case"end":return e.stop()}}),e)}))),children:"Submit Application"})]})})},ln={bar:{position:"absolute",top:0,left:0,right:0,height:50,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:_.e.transparentBlack,fontFamily:"roboto"},logOutBtn:{padding:5,borderRadius:5,margin:10,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:_.e.transparentWhite}},un={frame:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},input:{fontSize:15,borderRadius:5,fontFamily:"roboto",textShadow:"0 0 5px white",padding:2,outline:"none",border:"none",backgroundColor:_.e.transparentWhite},searchIcon:{color:_.e.transparentWhite},searchBtn:{padding:5,display:"flex",justifyContent:"center",alignItems:"center"}},dn=n(132),hn=function(e){var t=e.height,n=e.width,r=e.fontSize,a=Object(u.useState)(""),i=Object(ue.a)(a,2),o=i[0],s=i[1];return Object(l.jsxs)("div",{style:un.frame,children:[Object(l.jsx)("input",{type:"text",value:o,onInput:function(e){return s(e.target.value)},style:Object(f.a)(Object(f.a)({},un.input),{},{height:t,width:n,fontSize:r})}),Object(l.jsx)("div",{style:un.searchBtn,onMouseOver:function(e){e.target.style.opacity=.5},onMouseOut:function(e){e.target.style.opacity=1},children:Object(l.jsx)(dn.a,{style:Object(f.a)(Object(f.a)({},un.searchIcon),{},{fontSize:r})})})]})},pn=function(e){var t=e.disconnect,n=e.userInfo,r=e.updateUserInfo;return Object(l.jsxs)("div",{style:ln.bar,children:[Object(l.jsx)(on,{previewWidth:40,previewHeight:40,imageUrl:n.profileUrl,setImageUrl:function(){var e=Object(x.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({profileUrl:t});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(l.jsx)(hn,{width:200}),Object(l.jsx)("div",{style:ln.logOutBtn,onClick:Object(x.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),onMouseOver:function(e){e.target.style.opacity=.5},onMouseOut:function(e){e.target.style.opacity=1},children:"Disconnect"})]})},fn={frame:{backgroundColor:_.e.transparentWhite,position:"absolute",bottom:0,justifyContent:"center",display:"flex",alignItems:"center",overflow:"hidden",transition:"width 0.2s, height 0.2s, opacity 0.1s",zIndex:9},container:{width:"80%",height:"80%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",backgroundColor:_.e.transparentBlack,borderRadius:20,margin:50},appContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",maxWidth:800,transition:"width 0.2s"},icon:{height:"100%",width:"100%",borderRadius:"50%"},title:{fontSize:24,color:_.e.optionTextColor,fontFamily:"roboto",margin:10,textShadow:"0 0 5px white"},exitBtn:{position:"absolute",bottom:10,width:50,height:50,borderRadius:25,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:_.e.transparentBlack}},bn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={applications:{},popUpOn:!1,popUpPosition:{},popUpEntries:[]},r.closePopUp=r.closePopUp.bind(Object(O.a)(r)),r.setPopUp=r.setPopUp.bind(Object(O.a)(r)),r.handleUninstallApp=r.handleUninstallApp.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{applications:e.props.fileSystem.retrieveApps()})}))}},{key:"handleUninstallApp",value:function(e){var t=this.state.applications;delete t[e],this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{applications:t})})),this.props.fileSystem.uninstallApp(e)}},{key:"closePopUp",value:function(e){e.preventDefault(),"click"===e.type?window.removeEventListener("click",this.closePopUp):window.removeEventListener("contextmenu",this.closePopUp),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{popUpOn:!1})}))}},{key:"setPopUp",value:function(e,t,n){this.setState((function(r){return Object(f.a)(Object(f.a)({},r),{},{popUpOn:!0,popUpPosition:{x:e,y:t},popUpEntries:n})}))}},{key:"render",value:function(){var e=this,t=this.state.applications,n=[],r=function(r){var a=t[r],i=a.getMetaData();n.push(Object(l.jsx)(he,{icon:i.icon?Object(l.jsx)("img",{alt:"",style:fn.icon,src:i.icon}):Object(l.jsx)("div",{style:fn.icon}),name:i.name,nameChangable:!1,width:100,height:110,onClick:function(t){e.props.addCurrentApp(a)},onRightClick:function(t){t.preventDefault(),t.stopPropagation(),window.addEventListener("click",e.closePopUp),e.setPopUp(t.clientX,t.clientY,[{content:"Inspect Raw",func:function(){return e.props.addCurrentRaw(i.hash)}},{content:"Uninstall",func:function(){return e.handleUninstallApp(i.hash)}}])},nameOnChange:!1},i.hash))};for(var a in t)r(a);return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{style:Object(f.a)({width:"100%",height:this.props.explorerOn?"100%":"0%",opacity:this.props.explorerOn?1:0},fn.frame),children:[Object(l.jsxs)("div",{style:fn.container,children:[Object(l.jsx)("div",{style:fn.title,children:"Applications"}),Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},fn.appContainer),{},{width:100*Math.floor(.8*this.props.dims.width/100)+"px"}),children:n})]}),Object(l.jsx)("div",{style:fn.exitBtn,onClick:this.props.toggleAppExplorer,children:Object(l.jsx)(Ae.a,{style:{color:"white",fontSize:24}})}),this.state.popUpOn&&Object(l.jsx)(Oe,{top:this.state.popUpPosition.y,left:this.state.popUpPosition.x,entries:this.state.popUpEntries})]})})}}]),n}(d.a.Component),jn={window:{overflowY:"auto",justifyContent:"stretch",alignItems:"flex-start"},frame:{display:"flex",flex:1,flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",padding:"0px",outline:"none"},lineInput:{outline:"none",border:"none",width:"100%",margin:"0",shadow:"none"},lineBar:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",borderWidth:"0px",paddingRight:5,width:50,borderStyle:"solid",borderColor:"white"},lineNumber:{display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:5,background:"black",color:"white"},bottomBar:{height:30,display:"flex",justifyContent:"flex-start",alignItems:"center"}},On=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={config:e.config,width:e.height,height:e.width,lineNumber:1},r.restoreValue=r.restoreValue.bind(Object(O.a)(r)),r.calculateLines=r.calculateLines.bind(Object(O.a)(r)),r.frame=d.a.createRef(),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.frame.current;if(t){var n=t.offsetHeight,r=parseInt(t.style.lineHeight);t.innerText=this.props.value,t.addEventListener("keydown",(function(t){if(t.ctrlKey)return 83===t.which&&(t.preventDefault(),e.props.saveFile()),!1})),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{lineNumber:n/r})}))}else this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{lineNumber:1})}))}},{key:"restoreValue",value:function(e,t){var n=this,r=this.frame.current;r&&(r.innerText=this.props.value,r.addEventListener("keydown",(function(e){if(e.ctrlKey)return 83===e.which&&(e.preventDefault(),n.props.saveFile()),!1}))),this.calculateLines()}},{key:"calculateLines",value:function(){var e=this.frame.current;if(e){var t=e.offsetHeight/(parseInt(e.style.lineHeight)-.16);this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{lineNumber:t})}))}else this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{lineNumber:1})}))}},{key:"render",value:function(){for(var e=this,t=this.props.config,n=[],r=0;r<this.state.lineNumber;r++)n.push(Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},jn.lineNumber),{},{height:parseInt(t.lineHeight)-.16}),children:String(r+1)},String(r)));return Object(l.jsx)(ze,{id:this.props.id+"_window",top:0,left:0,name:this.props.name+(this.props.editable?this.props.saved?" \u25cf":" \u25cb":" - [readonly]"),onClick:this.props.onFocus,onCancel:this.props.closeWindow,onResize:this.restoreValue,children:Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)(Object(f.a)({},y.row),jn.window),{},{height:this.state.height,width:this.state.width,background:t.frameColor,color:t.textColor}),children:[Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},jn.lineBar),{},{background:t.frameColor,fontFamily:t.fontFamily,fontSize:t.fontSize}),children:n}),Object(l.jsx)("div",{ref:function(t){e.frame.current=t},id:this.props.id+"_editorframe",style:Object(f.a)(Object(f.a)({},jn.frame),{},{background:t.frameColor,color:t.textColor,lineHeight:t.lineHeight,fontFamily:t.fontFamily,fontSize:t.fontSize}),spellCheck:!1,onInput:function(t){e.calculateLines(),e.props.onChangeText(t)},contentEditable:this.props.editable}),Object(l.jsx)("div",{style:jn.bottomBar})]})})}}]),n}(d.a.Component),gn=function(e){var t=e.hash,n=e.name,r=e.data,a=e.closeWindow,i=e.onFocus;return Object(l.jsx)(ze,{id:t,top:0,left:0,name:n,onCancel:a,onClick:i,children:Object(l.jsx)(Xt,{id:t,width:"100%",height:"100%",data:r})})},mn=function(e){var t=e.id,n=e.app,r=e.closeWindow,a=e.handleAppMessage,i=e.onFocus;return Object(u.useEffect)((function(){return window.addEventListener("message",a),function(){return window.removeEventListener("message",a)}}),[n]),Object(l.jsx)(ze,{id:n.getHash(),top:0,left:0,name:n.getName(),onClick:i,onCancel:r,children:Object(l.jsx)(Xt,{id:t,width:"100%",height:"100%",data:n.getData()})})},yn=n.p+"static/media/Night.35c6495d.jpg",vn=n.p+"static/media/Lake.a961b170.jpg",Cn=n.p+"static/media/Town.41cb53df.jpg",xn=n.p+"static/media/Boat.31e53002.jpg",wn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={codeEditorRoot:null,width:window.innerWidth,height:window.innerHeight,fileExplorers:[],currentWindows:[],currentFiles:[],currentRaw:[],currentApps:[],installHash:"",appExplorerOn:!1,backgroundIndex:0},r.backgrounds=[yn,vn,Cn,xn],r.setCodeEditorRoot=r.setCodeEditorRoot.bind(Object(O.a)(r)),r.updateDimensions=r.updateDimensions.bind(Object(O.a)(r)),r.openWindow=r.openWindow.bind(Object(O.a)(r)),r.closeWindow=r.closeWindow.bind(Object(O.a)(r)),r.setInstallHash=r.setInstallHash.bind(Object(O.a)(r)),r.toggleAppExplorer=r.toggleAppExplorer.bind(Object(O.a)(r)),r.executeAppMessage=r.executeAppMessage.bind(Object(O.a)(r)),r.focusCurrentFile=r.focusCurrentFile.bind(Object(O.a)(r)),r.focusCurrentWindow=r.focusCurrentWindow.bind(Object(O.a)(r)),r.focusCurrentExplorer=r.focusCurrentExplorer.bind(Object(O.a)(r)),r.focusCurrentRaw=r.focusCurrentRaw.bind(Object(O.a)(r)),r.focusCurrentApp=r.focusCurrentApp.bind(Object(O.a)(r)),r.addCurrentFile=r.addCurrentFile.bind(Object(O.a)(r)),r.addCurrentWindow=r.addCurrentWindow.bind(Object(O.a)(r)),r.addCurrentApp=r.addCurrentApp.bind(Object(O.a)(r)),r.addCurrentRaw=r.addCurrentRaw.bind(Object(O.a)(r)),r.closeCurrentRaw=r.closeCurrentRaw.bind(Object(O.a)(r)),r.closeCurrentApp=r.closeCurrentApp.bind(Object(O.a)(r)),r.closeCurrentFile=r.closeCurrentFile.bind(Object(O.a)(r)),r.closeCurrentWindow=r.closeCurrentWindow.bind(Object(O.a)(r)),r.saveCurrentFile=r.saveCurrentFile.bind(Object(O.a)(r)),r.onChangeText=r.onChangeText.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.updateDimensions),setInterval((function(){return e.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{backgroundIndex:t.backgroundIndex===e.backgrounds.length-1?0:t.backgroundIndex+1})}))}),6e4)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"updateDimensions",value:function(){this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{width:window.innerWidth,height:window.innerHeight})}))}},{key:"setInstallHash",value:function(e){this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{installHash:e})}))}},{key:"setCodeEditorRoot",value:function(e){this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{codeEditorRoot:e})}))}},{key:"closeWindow",value:function(e){var t=this.state.fileExplorers;t.splice(e,1),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{fileExplorers:t})}))}},{key:"openWindow",value:function(e){var t=this.state.fileExplorers;t.push(e),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{fileExplorers:t})}))}},{key:"toggleAppExplorer",value:function(){this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{appExplorerOn:!e.appExplorerOn})}))}},{key:"executeAppMessage",value:function(e,t){var n=this.props.fileSystem,r=document.getElementById(e+"_appView");if("exec"===t.type)console.log("EXEC",e,t.command);else if("post"===t.type)console.log("POST",e,t.key,t.value),n.setAppStorage(e,t.key,t.value);else if("get"===t.type){console.log("GET",e,t.key);var a=n.getAppStorage(e,t.key);r.contentWindow.postMessage(Object(f.a)(Object(f.a)({},t),{},{response:a})),console.log(a)}}},{key:"addCurrentFile",value:function(e){var t,n=Object(L.a)(this.state.currentFiles);try{for(n.s();!(t=n.n()).done;){if(t.value.metadata.hash===e)return}}catch(a){n.e(a)}finally{n.f()}var r=this.props.fileSystem.getFile(e);this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentFiles:[].concat(Object(le.a)(e.currentFiles),[{metadata:r.getMetaData(),value:r.getData(),saved:!0}])})}))}},{key:"addCurrentWindow",value:function(e){var t,n=Object(L.a)(this.state.currentWindows);try{for(n.s();!(t=n.n()).done;){if(t.value.metadata.hash===e)return}}catch(a){n.e(a)}finally{n.f()}var r=this.props.fileSystem.getFile(e);this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentWindows:[].concat(Object(le.a)(e.currentWindows),[{metadata:r.getMetaData(),value:r.getData(),saved:!0}])})}))}},{key:"onChangeText",value:function(e,t){var n=e.target.innerText,r=this.state.currentFiles;r[t].value=n,r[t].saved=!1,this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentFiles:r,popUpOn:!1})}))}},{key:"saveCurrentFile",value:function(e){var t=this.state.currentFiles;t[e].saved=!0,this.props.fileSystem.saveFile(t[e].metadata.hash,t[e].value),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentFiles:t})}))}},{key:"closeCurrentFile",value:function(e){var t=this.state.currentFiles;t[e].saved?(t.splice(e,1),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentFiles:t})}))):window.confirm("Do you want to close without saving your modifications? ('Ctrl + S' to save)")&&(t.splice(e,1),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentFiles:t})})))}},{key:"focusCurrentWindow",value:function(e){var t=this.state.currentWindows,n=t.splice(e,1);t.push.apply(t,Object(le.a)(n)),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentWindows:t})}))}},{key:"focusCurrentFile",value:function(e){var t=this.state.currentFiles,n=t.splice(e,1);t.push.apply(t,Object(le.a)(n)),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentFiles:t})}))}},{key:"focusCurrentRaw",value:function(e){var t=this.state.currentRaw,n=t.splice(e,1);t.push.apply(t,Object(le.a)(n)),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentRaw:t})}))}},{key:"focusCurrentApp",value:function(e){var t=this.state.currentApps,n=t.splice(e,1);t.push.apply(t,Object(le.a)(n)),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentApps:t})}))}},{key:"focusCurrentExplorer",value:function(e){var t=this.state.fileExplorers,n=t.splice(e,1);t.push.apply(t,Object(le.a)(n)),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{fileExplorers:t})}))}},{key:"closeCurrentWindow",value:function(e){var t=this.state.currentWindows;t[e].saved?(t.splice(e,1),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentWindows:t})}))):window.confirm("Do you want to close without saving your modifications? ('Ctrl + S' to save)")&&(t.splice(e,1),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentWindows:t})})))}},{key:"addCurrentRaw",value:function(e){var t,n=Object(L.a)(this.state.currentRaw);try{for(n.s();!(t=n.n()).done;){if(t.value.metadata.hash===e)return}}catch(a){n.e(a)}finally{n.f()}var r=this.props.fileSystem.getApp(e);this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentRaw:[].concat(Object(le.a)(e.currentRaw),[{metadata:r.getMetaData(),value:r.getData(),saved:!0}])})}))}},{key:"addCurrentApp",value:function(e){var t=this.state.currentApps;t.push(e),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentApps:t})}))}},{key:"closeCurrentApp",value:function(e){var t=this.state.currentApps;t.splice(e,1),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentApps:t})}))}},{key:"closeCurrentRaw",value:function(e){var t=this.state.currentRaw;t[e].saved?(t.splice(e,1),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentRaw:t})}))):window.confirm("Do you want to close without saving your modifications? ('Ctrl + S' to save)")&&(t.splice(e,1),this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentRaw:t})})))}},{key:"render",value:function(){var e=this,t=this.props.fileSystem,n=this.state.fileExplorers.map((function(n,r){return Object(l.jsx)(Ke,{fileSystem:e.props.fileSystem,setCodeEditorRoot:e.setCodeEditorRoot,setInstallHash:e.setInstallHash,addCurrentFile:e.addCurrentFile,addCurrentWindow:e.addCurrentWindow,closeCurrentWindow:e.closeCurrentWindow,closeCurrentFile:e.closeCurrentFile,saveCurrentFile:e.saveCurrentFile,root:n,id:n,onFocus:function(){return e.focusCurrentExplorer(r)},name:t.getDirectory(n).getName(),closeWindow:function(){return e.closeWindow(r)},openWindow:e.openWindow},n)})),r=this.state.currentRaw.map((function(t,n){return Object(l.jsx)(On,{id:t.metadata.hash,config:{frameColor:_.e.backgroundTheme,textColor:_.e.foregroundTheme,lineHeight:"20px",fontFamily:"roboto",fontSize:15},onFocus:function(){return e.focusCurrentRaw(n)},name:t.metadata.name,value:t.value,saved:t.saved,closeWindow:function(){return e.closeCurrentRaw(n)},height:"100%",width:"100%"},t.metadata.hash)})),a=this.state.currentFiles.map((function(t,n){return Object(l.jsx)(On,{id:t.metadata.hash,config:{frameColor:_.e.backgroundTheme,textColor:_.e.foregroundTheme,lineHeight:"20px",fontFamily:"roboto",fontSize:15},name:t.metadata.name,value:t.value,saved:t.saved,onChangeText:function(t){return e.onChangeText(t,n)},closeWindow:function(){return e.closeCurrentFile(n)},onFocus:function(){return e.focusCurrentFile(n)},saveFile:function(){return e.saveCurrentFile(n)},editable:!0,height:"100%",width:"100%"},t.metadata.hash)})),i=this.state.currentWindows.map((function(t,n){return Object(l.jsx)(gn,{name:t.metadata.name,hash:t.metadata.hash,data:t.value,onFocus:function(){return e.focusCurrentWindow(n)},closeWindow:function(){return e.closeCurrentWindow(n)}},t.metadata.hash)})),o=this.state.currentApps.map((function(t,n){return Object(l.jsx)(mn,{app:t,id:t.getHash()+"_appView",closeWindow:function(){return e.closeCurrentApp(n)},onFocus:function(){return e.focusCurrentApp(n)},handleAppMessage:function(n){return e.executeAppMessage(t.getHash(),n.data)}},t.getHash())}));return Object(l.jsxs)("div",{className:"desktop",style:Object(f.a)(Object(f.a)(Object(f.a)({},y.fullScreenContainer),y.column),{},{backgroundColor:_.e.backgroundTheme,backgroundSize:"cover",backgroundImage:"url(".concat(this.backgrounds[this.state.backgroundIndex],")")}),children:[Object(l.jsx)(pn,{disconnect:this.props.signOutUser,userInfo:this.props.userInfo,updateUserInfo:this.props.updateUserInfo}),Object(l.jsx)(Le,{fileSystem:t,setCodeEditorRoot:this.setCodeEditorRoot,setInstallHash:this.setInstallHash,root:"root",dims:{width:this.state.width,height:this.state.height},openWindow:this.openWindow,addCurrentFile:this.addCurrentFile,addCurrentWindow:this.addCurrentWindow,closeCurrentWindow:this.closeCurrentWindow,closeCurrentFile:this.closeCurrentFile,saveCurrentFile:this.saveCurrentFile}),Object(l.jsx)(Ft,{dims:{width:this.state.width,height:this.state.height},fileSystem:t,systemData:this.props.systemData,updateSystemData:this.props.updateSystemData,appFuncs:{toggleAppExplorer:this.toggleAppExplorer}}),n,a,i,r,o,""!==this.state.installHash&&Object(l.jsx)(cn,{userId:this.props.userId,hash:this.state.installHash,name:"App Installer",fileSystem:this.props.fileSystem,handleInstallApp:this.props.handleInstallApp,closeInstaller:function(){return e.setInstallHash("")}}),this.state.codeEditorRoot&&Object(l.jsx)(nn,{fileSystem:t,currentHash:this.state.codeEditorRoot,closeWindow:function(){return e.setCodeEditorRoot(null)},executeAppMessage:this.executeAppMessage}),Object(l.jsx)(bn,{explorerOn:this.state.appExplorerOn,dims:{width:this.state.width,height:this.state.height},fileSystem:t,toggleAppExplorer:this.toggleAppExplorer,addCurrentApp:this.addCurrentApp,addCurrentRaw:this.addCurrentRaw,closeCurrentApp:this.closeCurrentApp,closeCurrentRaw:this.closeCurrentRaw})]})}}]),n}(d.a.Component),_n=ne.loadFileSystem,kn=ne.syncFileSystem,Sn=ne.handleInstallApp,Dn=ne.getSystemData,En=ne.setSystemData,In=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={fileSystem:null,systemData:{},windowManager:new ce([],(function(){})),saved:!0},r.setDataChanged=r.setDataChanged.bind(Object(O.a)(r)),r.updateSystemData=r.updateSystemData.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){_n(this),Dn(this)}},{key:"setDataChanged",value:function(){kn(this)}},{key:"updateSystemData",value:function(e){En(e,this)}},{key:"render",value:function(){var e=this;return Object(l.jsx)("div",{className:"home",style:Object(f.a)(Object(f.a)({},y.fullScreenContainer),{},{backgroundColor:"black"}),children:this.state.fileSystem?Object(l.jsx)(wn,{userId:this.props.userId,userInfo:this.props.userInfo,updateUserInfo:this.props.updateUserInfo,fileSystem:this.state.fileSystem,windowManager:this.state.windowManager,signOutUser:this.props.signOutUser,systemData:this.state.systemData,updateSystemData:this.updateSystemData,handleInstallApp:function(t){return Sn(t,e)}}):Object(l.jsx)(l.Fragment,{})})}}]),n}(d.a.Component),Fn={container:{justifyContent:"center",alignItems:"center",backgroundColor:_.e.transparentBlack},modal:{padding:20,borderRadius:20,fontSize:12,width:300,fontFamily:"roboto",backgroundColor:_.e.transparentBlack,color:_.e.transparentWhite,display:"flex",flexDirection:"column"},label:{display:"flex",marginTop:10,marginBottom:5,justifyContent:"center",alignItems:"center",alignSelf:"stretch",flexDirection:"column"},button:{fontSize:12,fontFamily:"roboto",margin:10,padding:10,justifyContent:"center",alignItems:"center",textAlign:"center",borderRadius:10,backgroundColor:_.e.transparentBlack},input:{fontSize:15,borderRadius:5,marginBottom:10,width:"100%",fontFamily:"roboto",textShadow:"0 0 5px white",padding:2,outline:"none",border:"none",backgroundColor:_.e.optionColor,color:_.e.transparentWhite}},Mn=n(77),Nn=n.n(Mn),Rn=function(e){var t=e.signInUser,n=e.signUpUser,r=e.errMsg,a=Object(u.useState)(!0),i=Object(ue.a)(a,2),o=i[0],s=i[1],c=Object(u.useState)(""),d=Object(ue.a)(c,2),h=d[0],p=d[1],b=Object(u.useState)(""),j=Object(ue.a)(b,2),O=j[0],g=j[1],m=Object(u.useState)(""),v=Object(ue.a)(m,2),w=v[0],k=v[1],S=Object(u.useState)(!1),D=Object(ue.a)(S,2),E=D[0],I=D[1],F=function(e){e.target.style.opacity=.5},M=function(e){e.target.style.opacity=1};return o?Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},y.fullScreenContainer),Fn.container),children:Object(l.jsxs)("div",{style:Fn.modal,children:[Object(l.jsx)("div",{style:Fn.label,children:"Email"}),Object(l.jsx)("input",{type:"email",value:O,onChange:function(e){return g(e.target.value)},style:Fn.input,autoComplete:"on"}),Object(l.jsx)("div",{style:Fn.label,children:"Password"}),Object(l.jsx)("input",{type:"password",value:w,onChange:function(e){return k(e.target.value)},style:Fn.input,autoComplete:"on"}),Object(l.jsx)("div",{style:Fn.button,onMouseOver:F,onMouseOut:M,onClick:Object(x.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(O,w);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Sign In"}),Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Fn.label),{},{textAlign:"center"}),onMouseOver:F,onMouseOut:M,onClick:function(){return s(!o)},children:Object(l.jsx)("u",{children:"Create an account?"})}),""!==r&&Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Fn.label),{},{color:"red",textAlign:"center"}),children:r})]})}):Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},y.fullScreenContainer),Fn.container),children:Object(l.jsxs)("div",{style:Fn.modal,children:[Object(l.jsx)("div",{style:Fn.label,children:"Username"}),Object(l.jsx)("input",{type:"text",value:h,onChange:function(e){return p(e.target.value)},style:Fn.input}),Object(l.jsx)("div",{style:Fn.label,children:"Email"}),Object(l.jsx)("input",{type:"email",value:O,onChange:function(e){return g(e.target.value)},style:Fn.input}),Object(l.jsx)("div",{style:Fn.label,children:"Password"}),Object(l.jsx)("input",{type:"password",value:w,onChange:function(e){return k(e.target.value)},style:Fn.input}),Object(l.jsx)("div",{style:Fn.label,children:"Register as an developer"}),Object(l.jsx)("div",{style:Fn.label,children:Object(l.jsx)(Nn.a,{thumbStyle:{boxShadow:"0px 0px 2px white"},colors:{active:{base:"rgb(207,221,245)",hover:"rgb(177, 191, 215)"},inactive:{base:"rgb(65,66,68)",hover:"rgb(95,96,98)"}},inactiveLabel:"",activeLabel:"",value:E,onToggle:function(e){return I(!e)}})}),Object(l.jsx)("div",{style:Fn.button,onMouseOver:F,onMouseOut:M,onClick:Object(x.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(h,O,w,E?_.c.DEV:_.c.IND);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Create Account"}),Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Fn.label),{},{textAlign:"center"}),onMouseOver:F,onMouseOut:M,onClick:function(){return s(!o)},children:Object(l.jsx)("u",{children:"Already have an account?"})}),""!==r&&Object(l.jsx)("div",{style:Object(f.a)(Object(f.a)({},Fn.label),{},{color:"red",textAlign:"center"}),children:r})]})})},Wn=n(46),Ln={fontSize:25,fontFamily:"roboto",margin:10,borderRadius:"50%",width:40,height:40,display:"flex",justifyContent:"center",alignItems:"center",color:_.e.transparentBlack,boxShadow:"0 0 5px black"},Pn=function(e){var t=e.style;return Object(l.jsxs)("div",{style:Object(f.a)(Object(f.a)({},y.fullScreenContainer),{},{backgroundColor:_.e.backgroundTheme},t),children:[Object(l.jsx)(Wn.a.div,{style:Object(f.a)({},Ln),animate:{backgroundColor:["#CCCCCC","#FF0000","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC"],scale:[1,1.5,1,1,1,1,1],rotate:[0,60,120,180,240,300,360]},transition:{type:"spring",duration:2,repeat:1/0,repeatDelay:1},children:"W"}),Object(l.jsx)(Wn.a.div,{style:Object(f.a)({},Ln),animate:{backgroundColor:["#CCCCCC","#CCCCCC","#FF0000","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC"],scale:[1,1,1.5,1,1,1,1],rotate:[0,120,240,360,480,600,720]},transition:{type:"spring",duration:2,repeat:1/0,repeatDelay:1},children:"E"}),Object(l.jsx)(Wn.a.div,{style:Object(f.a)({},Ln),animate:{backgroundColor:["#CCCCCC","#CCCCCC","#CCCCCC","#FF0000","#CCCCCC","#CCCCCC","#CCCCCC"],scale:[1,1,1,1.5,1,1,1],rotate:[0,180,360,540,720,900,1080]},transition:{type:"spring",duration:2,repeat:1/0,repeatDelay:1},children:"B"}),Object(l.jsx)(Wn.a.div,{style:Object(f.a)({},Ln),animate:{backgroundColor:["#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#FF0000","#CCCCCC","#CCCCCC"],scale:[1,1,1,1,1.5,1,1],rotate:[0,120,240,360,480,600,720]},transition:{type:"spring",duration:2,repeat:1/0,repeatDelay:1},children:"O"}),Object(l.jsx)(Wn.a.div,{style:Object(f.a)({},Ln),animate:{backgroundColor:["#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#FF0000","#CCCCCC"],scale:[1,1,1,1,1,1.5,1],rotate:[0,60,120,180,240,300,360]},transition:{type:"spring",duration:2,repeat:1/0,repeatDelay:1},children:"S"})]})},Tn=n(78),An=function(e){Object(Tn.a)(e),Object(u.useEffect)((function(){document.addEventListener("mousemove",n),document.addEventListener("mousedown",r),document.addEventListener("mouseup",a)}),[]);var t=Object(u.useRef)(),n=function(e){t.current&&(t.current.style.left=e.clientX+"px",t.current.style.top=e.clientY+"px")},r=function(e){t.current&&(t.current.style.backgroundColor="red")},a=function(e){t.current&&(t.current.style.backgroundColor="white")};return Object(l.jsx)("div",{ref:t,style:{position:"absolute",zIndex:9999,color:"red",pointerEvents:"none",height:5,width:5,borderRadius:3,backgroundColor:"white",boxShadow:"0 0 5px black",transform:"translate(-50%, -50%)"}})},Un=(n(96),ne.signUpUser),Bn=ne.signInUser,Hn=ne.signOutUser,zn=ne.updateUserInfo,Kn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).host="http://54.67.14.28:8081",r.state={userId:null,userInfo:{},errMsgs:{},loading:!0},r.setLoginErrMsg=r.setLoginErrMsg.bind(Object(O.a)(r)),r.setLoading=r.setLoading.bind(Object(O.a)(r)),r}return Object(j.a)(n,[{key:"setLoginErrMsg",value:function(e){this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{errMsgs:Object(f.a)(Object(f.a)({},t.errMsgs),{},{login:e})})}))}},{key:"setLoading",value:function(e){this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{loading:e})}))}},{key:"componentDidMount",value:function(){Bn(null,null,!0,this),k()}},{key:"render",value:function(){var e=this;return this.state.loading?Object(l.jsx)(Pn,{}):this.state.userId?Object(l.jsxs)("div",{style:y.fullScreenContainer,children:[Object(l.jsx)(An,{}),Object(l.jsx)(In,{userId:this.state.userId,userInfo:this.state.userInfo,updateUserInfo:function(t){return zn(t,e)},host:this.host,signOutUser:function(){return Hn(e)}})]}):Object(l.jsxs)("div",{style:y.fullScreenContainer,children:[Object(l.jsx)(An,{}),Object(l.jsx)(Pn,{style:{backgroundColor:"transparent",height:"50%"}}),Object(l.jsx)(Rn,{signInUser:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Bn(t,n,r,e)},signUpUser:function(t,n,r,a){return Un(t,n,r,a,e)},errMsg:this.state.errMsgs.login,setErrMsg:this.state.setLoginErrMsg})]})}}]),n}(d.a.Component);p.a.render(Object(l.jsx)(d.a.StrictMode,{children:Object(l.jsx)(Kn,{})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.0818beed.chunk.js.map